<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Exercices Allocines</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="Seance7_files/libs/clipboard/clipboard.min.js"></script>
<script src="Seance7_files/libs/quarto-html/quarto.js"></script>
<script src="Seance7_files/libs/quarto-html/popper.min.js"></script>
<script src="Seance7_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Seance7_files/libs/quarto-html/anchor.min.js"></script>
<link href="Seance7_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Seance7_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Seance7_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Seance7_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Seance7_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Exercices Allocines</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Dans ce notebook nou tenterons d’analyser le jeu de données Allocine et nous présenterons 4 graphiques clés et un réseau pour comprendre les différentes relations dans ce dataframe.</p>
<section id="chargement-des-librairies" class="level2">
<h2 class="anchored" data-anchor-id="chargement-des-librairies">Chargement des librairies</h2>
<p>Les librairies que nous utiliserons dans ce notebook sont :</p>
<div id="cell-3" class="cell" data-execution_count="230">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> networkx <span class="im">as</span> nx</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ensuite on importe notre dataframe (df) et on jette petit aperçu sur ses 5 premières lignes</p>
<div id="cell-5" class="cell" data-execution_count="231">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_excel(<span class="st">"Data/Base_allocine.xlsx"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="231">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Titre</th>
<th data-quarto-table-cell-role="th">Nationality</th>
<th data-quarto-table-cell-role="th">Channel</th>
<th data-quarto-table-cell-role="th">Actor</th>
<th data-quarto-table-cell-role="th">Genre</th>
<th data-quarto-table-cell-role="th">Duration</th>
<th data-quarto-table-cell-role="th">Date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Bloodline (2015)</td>
<td>U.S.A.</td>
<td>Netflix</td>
<td>Kyle Chandler;Linda Cardellini;Ben Mendelsohn</td>
<td>Drame , Thriller</td>
<td>42min</td>
<td>2015 - 2017</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>The Fosters</td>
<td>U.S.A.</td>
<td>Freeform</td>
<td>Teri Polo;Sherri Saum;Jake T. Austin</td>
<td>Drame , Famille</td>
<td>42min</td>
<td>2013 - 2018</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Marvel's Luke Cage</td>
<td>U.S.A.</td>
<td>Netflix</td>
<td>Mike Colter;Simone Missick;Alfre Woodard</td>
<td>Fantastique , Action</td>
<td>52min</td>
<td>2016 - 2018</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>The Hollow Crown</td>
<td>Grande-Bretagne</td>
<td>BBC Two</td>
<td>Jamie Ballard;James Fleet;Judi Dench</td>
<td>Drame , Historique</td>
<td>130min</td>
<td>2012 - 2016</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Future Man</td>
<td>U.S.A.</td>
<td>Hulu</td>
<td>Josh Hutcherson;Eliza Coupe;Derek Wilson</td>
<td>Comédie , Science fiction</td>
<td>25min</td>
<td>2017 - 2020</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="partie-1-représentations-graphiques" class="level2">
<h2 class="anchored" data-anchor-id="partie-1-représentations-graphiques">Partie 1 : Représentations graphiques</h2>
<p>Dans cette partie nous présenterons 4 graphiques : - Un graphique pour représenter le nombre d’apparition des acteurs présent dans plus de 2 films</p>
<ul>
<li><p>Le second graphique présenterons le Nombre de saisons d’un film en fonction de la chaine de diffusion</p></li>
<li><p>Le 3e graphique va s’articluer autour de la durée des films en fonction de leur genre</p></li>
<li><p>Et le dernier permettra de mieux appréhender le nombre de séries diffusées par année</p></li>
</ul>
<section id="nom-des-acteurs-et-leur-nombre-dapparitions" class="level3">
<h3 class="anchored" data-anchor-id="nom-des-acteurs-et-leur-nombre-dapparitions"><strong>Nom des acteurs et leur nombre d’apparitions</strong></h3>
<p>D’abord on crée une list dans laquelle on va stocker les noms des acteurs séparément</p>
<div id="cell-9" class="cell" data-execution_count="232">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>lit <span class="op">=</span> []</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> df[<span class="st">'Actor'</span>]:</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(i, <span class="bu">str</span>):</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>        separate <span class="op">=</span> i.split(<span class="st">";"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> a <span class="kw">in</span> separate:</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>            lit.append(a)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        lit.append(i)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Kyle Chandler', 'Linda Cardellini', 'Ben Mendelsohn', 'Teri Polo', 'Sherri Saum', 'Jake T. Austin', 'Mike Colter', 'Simone Missick', 'Alfre Woodard', 'Jamie Ballard', 'James Fleet', 'Judi Dench', 'Josh Hutcherson', 'Eliza Coupe', 'Derek Wilson', 'Maimie McCoy', 'Luke Pasqualino', 'Tom Burke', 'Nathan Fillion', 'Stana Katic', 'Molly C. Quinn', 'Kathy Bates', 'Nate Corddry', 'Christopher McDonald', 'Jonathan Groff', 'Frankie J. Alvarez', 'Murray Bartlett', 'Danny McBride', 'John Hawkes', 'Katy Mixon', 'Matthew Morrison', 'Chris Colfer', 'Kevin McHale', 'Sheridan Smith', 'Anna Maxwell Martin', 'Thomas Brodie-Sangster', 'Michelle Dockery', 'Juan Diego Botto', 'Terry Kinney', 'Laura Dern', 'Sarah Burns (III)', 'Luke Wilson', 'Stephen Moyer', 'Amy Acker', 'Sean Teale', 'Anne Consigny', 'Clotilde Hesme', 'Brune Martin', 'Dylan McDermott', 'Logan Marshall-Green', 'Nicki Aycox', 'Kat Dennings', 'Beth Behrs', 'Matthew Moy', 'Sean Bean', 'Richie Campbell', 'Vanessa Kirby', 'Angus Macfadyen', 'Jamie Bell', 'Seth Numrich', 'Kelsey Grammer', 'Connie Nielsen', 'Hannah Ware', 'Yuko Sanpei', 'Kenji Suzumura', 'Mutsumi Tamura', 'Michael Dorman', 'Kurtwood Smith', 'Michael Chernus', "Fiona O'Shaughnessy", 'Alexandra Roach', 'Nathan Stewart-Jarrett', 'Debra Messing', 'Josh Lucas', 'Laz Alonso', 'Billy Campbell', 'Karine Vanasse', 'Glen Gould', 'Marcia Gay Harden', 'Boris Kodjoe', 'Harry M. Ford', 'Famke Janssen', 'Ryan Eggold', 'Edi Gathegi', "Alex O'Loughlin", 'Scott Caan', 'Chi McBride', 'Sébastien Chassagne', 'Marie Kauffmann', 'Théo Fernandez', 'Julianna Margulies', 'Matt Czuchry', 'Alan Cumming', 'Bridgit Mendler', 'Jason Dolley', 'Leigh-Allyn Baker', 'Lee Pace', 'Scoot McNairy', 'Mackenzie Davis', 'Rachel Bloom', 'Vincent Rodriguez III', 'Skylar Astin', 'Joshua Sasse', 'Timothy Omundson', 'Karen David', 'Matt Oberg', 'Kurt Metzger', 'Natasha Leggero', 'Aaron Stanford', 'Amanda Schull', 'Noah Bean', 'Patrick Fugit', 'Philip Glenister', 'Wrenn Schmidt', 'Gabriel Macht', 'Patrick J. Adams', 'Rick Hoffman', 'Ashley Benson', 'Troian Bellisario', 'Lucy Hale', 'Brianna Hildebrand', 'Kiana Madeira', 'Quintessa Swindell', 'Priyanka Chopra Jonas', 'Jake McLaughlin', 'Johanna Braddy', 'Jean-Luc Bideau', 'Samuel Jouy', 'Clément Roussier', 'David Strathairn', 'Malik Yoba', 'Ryan Cartwright', 'Joshua Sasse', 'Tori Anderson', 'Jonathan Langdon', 'David Walton', 'Minnie Driver', 'Benjamin Stockham', 'Michael Imperioli', 'James McDaniel', 'Aisha Hinds', 'Mario Casas', 'Blanca Suárez', 'Juanjo Artero', 'Terrence Howard', 'Taraji P. Henson', 'Bryshere Y. Gray', 'Rami Malek', 'Christian Slater', 'Portia Doubleday', 'Sharon Rooney', 'Jodie Comer', 'Jordan Murphy', 'John Hannah', 'Suranne Jones', 'Julian Rhind-Tutt', 'Ryan Phillippe', 'Shantel VanSanten', 'Cynthia Addai-Robinson', 'Bobby Lockwood', 'Leona Vaughan', 'Shorelle Hepkin', 'Viola Davis', 'Billy Brown (II)', 'Alfred Enoch', 'Sam Witwer', 'Sam Huntington', 'Meaghan Rath', 'Karol Sevilla', 'Ruggero Pasquarelli', 'Michael Ronda', 'Andrew Rannells', 'Justin Bartha', 'Georgia King', 'Patricia Heaton', 'Neil Flynn', 'Eden Sher', 'José Coronado', 'Alex González', 'Claudia Traisac', 'Ed Marinaro', 'Darin Brooks', 'Chris Romano (II)', 'Piper Perabo', 'Christopher Gorham', 'Peter Gallagher', 'Josh Holloway', 'Sarah Wayne Callies', 'Peter Jacobson', 'Eric McCormack', 'Rachael Leigh Cook', 'Kelly Rowan', 'Emilia Clarke', 'Peter Dinklage', 'Kit Harington', 'Kevin Bacon', 'James Purefoy', 'Shawn Ashmore', 'Doona Bae', 'Jamie Clayton', 'Tina Desai', 'Julia Louis-Dreyfus', 'Anna Chlumsky', 'Tony Hale', 'Igor Gotesman', 'Pierre Niney', 'Natasha Andrews', 'Peter Serafinowicz', 'Griffin Newman', 'Valorie Curry', 'Reese Witherspoon', 'Nicole Kidman', 'Meryl Streep', 'Kira Kosarin', 'Jack Griffo', 'Chris Tallman', 'Famke Janssen', 'Bill Skarsgård', 'Landon Liboiron', 'Mark-Paul Gosselaar', 'Breckin Meyer', 'Malcolm McDowell', 'Eddie McClintock', 'Joanne Kelly', 'Saul Rubinek', 'Aarón Díaz', 'Ana Lorena Sánchez', 'Gonzalo García Vivanco', 'Rhenzy Feliz', 'Lyrica Okano', 'Virginia Gardner', 'Julien Baumgartner', 'Julie Delarme', 'David Baiot', 'Mamie Gummer', 'Justin Hartley', 'Aja Naomi King', 'Claude Perron', 'Laurence Arné', 'Vanessa David', 'Avan Jogia', 'Maddie Hasson', 'Kylie Bunbury', 'Liev Schreiber', 'Devon Bagby', 'Jon Voight', 'Brandon Scott', 'Maria Sten', 'Steven Robertson', 'Tom Mison', 'Lyndie Greenwood', 'Steven Weber', 'Mindy Kaling', 'Ed Weeks', 'Chris Messina', 'Camille Cottin', 'Thibault de Montalembert', 'Grégory Montel', 'Hayley Atwell', "James D'Arcy", 'Chad Michael Murray', 'Jon Hamm', 'Daniel Radcliffe', 'Vicki Pepperdine', 'Danny McBride', 'Walton Goggins', 'Kimberly Hebert Gregory', 'Benedict Cumberbatch', 'Martin Freeman', 'Amanda Abbington', 'Alex Roe', 'Eline Powell', 'Fola Evans-Akingbola', 'Erica Durance', 'Michael Shanks (I)', 'Daniel Gillies', 'Mary McDonnell', 'G.W. Bailey', 'Graham Patrick Martin', 'Julia Ormond', 'Jenna Dewan', 'Mädchen Amick', 'Taye Diggs', 'Kathleen Robertson', 'Ian Anthony Dale', 'Daisuke Ono', 'Yûki Kaji', 'Kensho Ono', nan, 'Justin Theroux', 'Amy Brenneman', 'Christopher Eccleston', 'Jaimie Alexander', 'Sullivan Stapleton', 'Rob Brown', 'Matt Passmore', 'Kiele Sanchez', 'Carlos Gómez (II)', 'Jonathan Cohen', 'Olivier Rosemberg', 'Louise Malek', 'James Franco', 'Maggie Gyllenhaal', 'Gbenga Akinnagbe', 'Dylan Minnette', 'Grace Saif', 'Christian Navarro', 'Sean Teale', 'Allison Miller', 'Eddie Ramos', 'Jonny Lee Miller', 'Lucy Liu', 'Aidan Quinn', 'Mike Henry (II)', 'Kevin Michael Richardson', 'Sanaa Lathan', 'Claude Legault', 'Réal Bossé', 'Benz Antoine', 'Abdelhafid Metalsi', 'Carole Bianic', 'Mélèze Bouzid', 'Justice Smith', 'Shameik Moore', 'Herizen F. Guardiola', 'Ben Rappaport', 'Diedrich Bader', 'Parvesh Cheena', 'Constance Wu', 'Randall Park', 'Hudson Yang', 'Clive Owen', 'Andre Holland', 'Jeremy Bobb', 'Stéphane De Groodt', 'Simon Abkarian', 'Stéphanie Pasterkamp', 'Suranne Jones', 'Bertie Carvel', 'Tom Taylor (IV)', 'Shigeru Chiba', 'Toshio Furukawa', 'Masako Nozawa', 'John Jarratt', 'Tess Haubrich', 'Matt Day', 'John Cho', 'Dominic Monaghan', 'Joseph Fiennes', 'Niall Matter', 'Sara Canning', 'Miranda Frigon', 'Stella Maeve', 'Olivia Taylor Dudley', 'Hale Appleman', 'Sean Bean', 'Amber Valletta', 'Mason Cook', 'Kiefer Sutherland', 'Adan Canto', 'Italia Ricci', 'John Lithgow', "Nicholas D'Agosto", 'Jayma Mays', 'Eliza Taylor', 'Paige Turco', 'Bob Morley', 'Victoria Justice', 'Leon Thomas III', 'Elizabeth Gillies', 'Jennifer Lopez', 'Ray Liotta', 'Drea de Matteo', 'Robert Taylor (II)', 'Katee Sackhoff', 'Lou Diamond Phillips', 'Xenia Goodwin', 'Alicia Banit', 'Dena Kaplan', 'Stephen Amell', 'Susanna Thompson', 'David Ramsey', 'Luke Newberry', 'David Walmsley', 'Emily Bevan', 'Gina Rodriguez', 'Justin Baldoni', 'Brett Dier', 'Anson Mount', 'Colm Meaney', 'Christopher Heyerdahl', 'Romi Paku', 'Rie Kugimiya', 'Shinichirô Miki', 'Leslie Hill', 'Andrew Lees', 'Katherine Hicks', 'Lorenzo Richelmy', 'Benedict Wong', 'Chin Han', 'Ben McKenzie', 'Shawn Hatosy', 'Regina King', 'Aidan Gillen', 'Michael Malarkey', 'Laura Mennell', 'Vera Farmiga', 'Freddie Highmore', 'Max Thieriot', 'David Tennant', 'Olivia Colman', 'Jodie Whittaker', 'Toni Collette', 'John Corbett', 'Keir Gilchrist', 'Çağatay Ulusoy', 'Ayça Ayşin Turan', 'Hazar Ergüçlü', 'Maxime Flourac', 'Stéphane Freiss', 'Alexia Barlier', 'Abigail Spencer', 'Matt Lanter', 'Malcolm Barrett', 'Kenan İmirzalıoğlu', 'Haluk Bilginer', 'Cansu Dere', nan, 'Beren Saat', 'Engin Akyürek', 'Sumru Yavrucuk', 'Laura Linney', 'Oliver Platt', 'John Benjamin Hickey', 'Bruce Campbell', 'Ray Santiago', 'Dana DeLorenzo', 'Anna Silk', 'Kris Holden-Ried', 'Ksenia Solo', 'Stephen Tompkinson', 'Andrea Lowe', 'Caroline Catz', 'Judith Light', 'Gaby Hoffmann', 'Jay Duplass', 'Sarah Shahi', 'Michael Trucco', 'Baron Vaughn', 'Adelaide Kane', 'Megan Follows', 'Celina Sinden', 'Garret Dillahunt', 'Lucas Neff', 'Martha Plimpton', 'Toby Stephens', 'Miranda Raison', 'Ronny Jhutti', 'Hugh Bonneville', 'Michelle Dockery', 'Maggie Smith', 'Rose McIver', 'Malcolm Goodwin', 'Rahul Kohli', 'Lindsey Shaw', 'Meaghan Jette Martin', 'Larry Miller', 'Lana Parrilla', 'Jennifer Morrison', 'Robert Carlyle', 'Jun Fukuyama', 'Nobuhiko Okamoto', 'Aya Suzaki', 'Hayley Atwell', 'Eddie Cahill', 'Shawn Ashmore', 'Neil Patrick Harris', 'Patrick Warburton', 'Malina Weissman', 'Benjamin Bellecour', 'Ben', 'Jonathan Cohen', 'David Giuntoli', 'Russell Hornsby', 'Silas Weir Mitchell', 'Alban Lenoir', 'Zita Hanrot', 'Délia Espinat-Dief', 'Ashton Kutcher', 'Elisha Cuthbert', 'Sam Elliott', 'Jean-Luc Bilodeau', 'Derek Theler', 'Melissa Peterman', 'Jeff Daniels', 'Emily Mortimer', 'John Gallagher Jr.', 'Claire Danes', 'Mandy Patinkin', 'Maury Sterling', nan, 'Nobunaga Shimazaki', 'Aya Hirano', 'Kana Hanazawa', 'Philip Glenister', 'Rosie Cavaliero', 'Myanna Buring', 'Dana Delany', 'Jeri Ryan', 'Geoffrey Arend', 'Lisette Pagler', 'Pia Halvorsen', 'Johan Paulsen', 'Michael Sheen', 'Lizzy Caplan', 'Caitlin Fitzgerald', 'Richard Armitage', 'Rhys Ifans', 'Leland Orser', 'Damon Wayans', 'Seann William Scott', 'Keesha Sharp', 'Noah Wyle', 'Rebecca Romijn', 'Lindy Booth', 'Blanca Suárez', 'Yon González', 'Ana Fernández García', 'Philippe Lefebvre', 'Sara Martins', 'Jean-Luc Bideau', 'Danny Masterson', 'James Lesure', 'Michael Cassidy', 'Mandy Moore', 'Zachary Levi', 'Eden Espinosa', 'Kristin Kreuk', 'Jay Ryan (III)', 'Austin Basis', 'Greg Poehler', 'Rachel Blanchard', 'Priscilla Faia', 'Jim Carrey', 'Frank Langella', 'Judy Greer', 'George Blagden', 'Alexander Vlahos', 'Tygh Runyan', 'Santiago Cabrera', 'Jennifer Finnigan', 'Charlie Rowe', 'Louis Hofmann', 'Andreas Pietschmann', 'Maja Schöne', 'Clark Gregg', 'Ming-Na Wen', 'Chloe Bennet', 'Tom Riley', 'Laura Haddock', 'Blake Ritson', 'Clémentine Célarié', 'Caroline Anglade', 'Michel Jonasz', 'Claire Foy', 'Christian Cooke', 'Katharina Schüttler', 'Sagamore Stévenin', 'Clément Manuel', 'Alexia Barlier', 'Matthew Perry', 'Laura Benanti', 'John Cho', 'Hugo Speer', 'Gemma Chan', 'Lacey Turner', 'Callie Thorne', 'John Stamos', 'Mehcad Brooks', 'Eric Dane', 'Adam Baldwin', 'Charles Parnell', 'Romain Lancry', 'Joséphine Draï', 'Constance Labbé', 'Alexa Davalos', 'Joel de la Fuente', "Jason O'Mara", 'Justina Machado', 'Isabella Gomez', 'Marcel Ruiz', 'Steve Buscemi', 'Kelly Macdonald', 'Michael Shannon', 'Atsushi Abe', 'Satoshi Hino', 'Saori Hayami', 'Emily VanCamp', 'Madeleine Stowe', 'Joshua Bowman', 'Krysten Ritter', 'David Tennant', 'Rachael Taylor', 'Kristen Bell', 'Ted Danson', 'Jameela Jamil', 'Christina Ochoa', 'Matt Barr', 'Charlie Barnett', 'Ana Ortiz', 'Dania Ramirez', 'Roselyn Sanchez', 'Daniel Tosh', 'David Herman', 'Jerry Minor', 'Katherine McNamara', 'Dominic Sherwood', 'Alberto Rosende', 'Christine Citti', 'Juliette Arnaud', 'Samuel Theis', 'Hannah John-Kamen', 'Aaron Ashmore', 'Luke MacFarlane', 'Mike Luciano', 'Phillip Matarrese', 'Sutton Foster', 'Kelly Bishop', 'Emma Dumont', 'Aubrey Joseph', 'Olivia Holt', 'Gloria Reuben', 'David Duchovny', 'Grey Damon', 'Claire Holt', 'Robbie Amell', 'Peyton List (I)', 'Luke Mitchell', 'Jencarlos Canela', 'Gaby Espino', 'Miguel Varoni', 'Blake Anderson', 'Anders Holm', 'Adam DeVine', 'Samuel Barnett', 'Elijah Wood', 'Hannah Marks', nan, 'Angie Harmon', 'Lorraine Bracco', 'Sasha Alexander', 'Will Arnett', 'Amy Sedaris', 'Alison Brie', 'Jason Ritter', 'Blair Underwood', 'Zeljko Ivanek', 'Stéphane Caillard', 'Alma Jodorowsky', 'Lilly-Fleur Pointeaux', 'Allison Tolman', 'Alexa Swinton', 'Owain Yeoman', 'Jeremy Piven', 'Katherine Kelly', 'Zoe Tapper', 'Emma Roberts', 'Jamie Lee Curtis', 'John Stamos', 'Michelle Keegan', 'Luke Pasqualino', 'Ben Aldridge', 'Katie Stevens', 'Rita Volk', 'Gregg Sulkin', 'Ami Koshimizu', 'Toshihiko Seki', 'Aya Suzaki', 'Jason Ritter', 'Kristen Schaal', 'Alex Hirsch', 'Jean-Claude Van Damme', 'Kat Foster', 'Moises Arias', 'Bella Thorne', 'Charlie DePew', 'Georgie Flores', 'Craig Olejnik', 'Ennis Esmer', 'Lauren Lee Smith', 'François Arnaud', 'Arielle Kebbel', 'Dylan Bruce', "Ed O'Neill", 'Julie Bowen', 'Ty Burrell', "Melissa O'Neil", 'Anthony Lemke', 'Alex Mallari Jr.', 'Clovis Cornillac', 'Hugo Becker', 'Anne Charrier', 'Frank Welker', 'Mindy Cohn', 'Grey DeLisle', 'Kiefer Sutherland', 'David Mazouz', 'Maria Bello', 'Tony Anselmo', 'David Tennant', 'Danny Pudi', 'Bradley Walsh (II)', 'Paul Nicholls', 'Dominic Rowan', 'Jon Bernthal', 'Ben Barnes', 'Amber Rose Revah', 'Charlie Cox', 'Deborah Ann Woll', 'Elden Henson', 'Pedro Pascal', 'Damián Alcázar', 'Francisco Denis', 'Shiri Appleby', 'Constance Zimmer', 'Craig Bierko', 'Liam McIntyre', 'Peter Mensah', 'Manu Bennett', 'Peyton List (I)', 'Riley Smith', 'Devin Kelley', 'Juliette Lewis', 'Michael Ealy', 'Jordana Brewster', 'Nina Dobrev', 'Paul Wesley', 'Ian Somerhalder', 'Tyler Posey', "Dylan O'Brien", 'Tyler Hoechlin', 'Michaela Watkins', 'Tommy Dewey', 'Tara Lynne Barr', 'Kerry Washington', 'Guillermo Díaz', 'Tony Goldwyn', 'Robin Wright', 'Michael Kelly', 'Diane Lane', 'Yoann Blanc', 'Jasmina Douieb', 'Guillaume Kerbusch', 'Ellie Kemper', 'Tituss Burgess', 'Jane Krakowski', 'Taylor Schilling', 'Laura Prepon', 'Jason Biggs', 'Elisha Cuthbert', 'Eliza Coupe', 'Zachary Knighton', 'John Simm', 'Max Beesley', 'Marc Warren', 'Eliza Bennett', 'Taylor Dearden', 'Brandon Mychal Smith', 'Michael Nyqvist', 'Noomi Rapace', 'Lena Endre', 'Rachel Bilson', 'Scott Porter', 'Wilson Bethel', 'Noah Wyle', 'Moon Bloodgood', 'Drew Roy', 'Jeremy Irons', 'François Arnaud', 'Joanne Whalley', 'Amaia Salamanca', 'Yon González', 'Eloy Azorin', 'Vincent Elbaz', 'Anne Girouard', 'Hélène Seuzaret', 'Bianca Comparato', 'Vaneza Oliveira', 'Rodolfo Valente', 'Brooke Elliott', 'April Bowlby', 'Margaret Cho', 'Joseph Morgan', 'Daniel Gillies', 'Claire Holt', 'Gillian Jacobs', 'Paul Rust', "Claudia O'Doherty", 'Giovanni Ribisi', 'Marin Ireland', 'Margo Martindale', 'Karl Urban', 'Michael Ealy', 'Minka Kelly', 'Simone Kirby', 'Catherine Walker', 'Brian Gleeson', 'Christian Slater', 'Michelle Borth', 'Heather Stephens', 'Ben McKenzie', 'Donal Logue', 'David Mazouz', 'Felicity Huffman', 'Timothy Hutton', 'Richard Cabral', 'Jurnee Smollett-Bell', 'Aldis Hodge', 'Jessica De Gouw', 'Dominic West', 'Romola Garai', 'Ben Whishaw', 'Chad Michael Murray', 'Caitlin Carmichael', 'Rose McGowan', 'Dominic Cooper', 'Joseph Gilgun', 'Ruth Negga', 'Daniel Sunjata', 'Aaron Tveit', 'Vanessa Ferlito', 'Yannick Soulier', 'Estelle Skornik', 'Marie-France Pisier', 'Ioan Gruffudd', 'Alana De La Garza', 'Judd Hirsch', 'Joanna Vanderham', 'Sarah Lancashire', 'David Hayman', 'Maddie Hasson', 'Sarah Desjardins', 'Missi Pyle', 'James Belushi', "Jerry O'Connell", 'Jurnee Smollett-Bell', 'Inbar Lavi', 'Rob Heaps', 'Parker Young', 'Jay Baruchel', 'Eric André', 'Britt Lower', 'Zoe Perry', 'Joseph Gilgun', "Natasha O'Keeffe", 'Karla Crome', 'Zooey Deschanel', 'Jake Johnson (XVI)', 'Max Greenfield', 'Jake McDorman', 'Jennifer Carpenter', 'Hill Harper', 'Austin Butler', 'Ivana Baquero', 'Manu Bennett', 'Amybeth McNulty', 'Geraldine James', 'Lucas Jade Zumann', "Chris D'Elia", 'Brent Morin', 'Rick Glassman', 'Jane Levy', 'Jeremy Sisto', 'Allie Grant', nan, 'Kiernan Shipka', 'Ross Lynch', 'Lucy Davis', 'Taylor Gray', 'Vanessa Marshall', 'Freddie Prinze Jr.', 'Danny Pudi', 'Joel McHale', 'Gillian Jacobs', 'Paris Berelc', 'Isabel May', 'Jolie Jenkins', 'Daniel Wu', 'Emily Beecham', 'Orla Brady', 'Richard Harrington', 'Mali Harries', 'Alex Harries', 'Gael García Bernal', 'Malcolm McDowell', 'Lola Kirke', 'Phoebe Waller-Bridge', 'Brett Gelman', 'Andrew Scott', 'Jonas Nay', 'Maria Schrader', 'Ulrich Noethen', nan, 'Bryan Greenberg', 'Victor Rasuk', 'Lake Bell', 'J.K. Simmons', 'Olivia Williams', 'Harry Lloyd', 'Karen Hassan', 'Gillian Anderson', 'Jamie Dornan', 'Kyan Khojandi', 'Mikaël Alhawi', 'Alice David', 'Dreama Walker', 'Krysten Ritter', 'James Van Der Beek', 'Matt Bomer', 'Tim DeKay', 'Tiffani Thiessen', 'Matt Ryan', 'Harold Perrineau', 'Charles Halford', 'Kendall Schmidt', 'James Maslow', 'Carlos Pena Jr', 'Janet Varney', 'David Faustino', 'P.J. Byrne', 'Anthony Mackie', 'Lela Loren', 'Renée Elise Goldsberry', 'Debby Ryan', 'Peyton List (II)', 'Cameron Boyce', 'Jean-Hugues Anglade', 'Joseph Malerba', 'Karole Rocher', 'Hugh Dancy', 'Mads Mikkelsen', 'Gillian Anderson', 'Rachel Nichols', 'Victor Webster', 'Erik Knudsen', 'Josh Thomas', 'Thomas Ward', 'Caitlin Stasey', 'Brit Marling', 'Emory Cohen', 'Kingsley Ben-Adir', 'Antony Starr', 'Ivana Milicevic', 'Rus Blackwell', 'Matthias Schweighöfer', 'Alexandra Maria Lara', 'Franz Hagn', 'Jason Patric', 'Carla Gugino', 'Kacey Rohl', 'Dylan McDermott', 'Maggie Q', 'Mariana Klaveno', 'Enuka Okuma', 'Missy Peregrym', 'Eric Johnson', 'Maggie Q', 'Shane West', 'Lyndsy Fonseca', 'Henning Baum', 'Maximilian Grill', 'Helmfried von Lüttichau', 'R. Lee Ermey', 'Michael Rosenbaum', 'Sara Rue', 'Mike Kosinski', 'Laz Alonso', 'Domenick Lombardozzi', 'Jimmi Simpson', 'Tom Weston-Jones', 'Franka Potente', 'Kyle Schmid', 'Adria Arjona', 'Oliver Jackson-Cohen', 'Ana Ularu', 'Italia Ricci', 'Mary Page Keller', 'Richard Brancatisano', 'Aden Young', 'Abigail Spencer', 'Clayne Crawford', 'Christopher Meloni', 'Patton Oswalt', 'Ritchie Coster', 'Lenny Venito', 'Jami Gertz', 'Simon Templeman', 'Alban Lenoir', 'Alexandre Philip', 'Benoît Moret', 'Barry Sloane', 'Kyle Schmid', 'Juan Pablo Raba', 'Poppy Montgomery', 'Dylan Walsh', 'James Hiroyuki Liao', 'Wendell Pierce', 'Clarke Peters', 'Khandi Alexander', 'Nicole Gale Anderson', 'Tyler Blackburn', 'Brett Dier', 'Janet Montgomery', 'Shane West', 'Seth Gabel', 'Will Forte', 'Cleopatra Coleman', 'Kristen Schaal', 'Paul Wesley', 'Odette Annable', 'Danielle Campbell', 'Willa Fitzgerald', 'Herizen F. Guardiola', 'Marlo Kelly', 'Octavia Spencer', 'Dave Annable', 'Brian Bradley', nan, 'Nick Offerman', 'Amy Poehler', 'Aubrey Plaza', 'Kensho Ono', 'Yuki Ono', 'Chiwa Saito', 'Miranda Hart', 'Sarah Hadland', 'Patricia Hodge', 'Jim Caviezel', 'Michael Emerson', 'Kevin Chapman', 'Dominic West', 'Maura Tierney', 'Anna Paquin', 'Natsuki Hanae', 'Risa Taneda', 'Ryōta Ōsaka', 'Grégoire Montana', 'Adèle Wismes', 'Romane Lucas', 'Emma Colberti', 'Gérard Rinaldi', 'Julie Ravix', 'Alfred Molina', 'Skeet Ulrich', 'Corey Stoll', 'Grégoire Ludig', 'David Marsais', 'Aude Gogny-Goubert', 'Thomas Middleditch', 'Josh Brener', 'Martin Starr', 'D.J. Cotrona', 'Zane Holtz', 'Jesse Garcia', 'Mireille Enos', 'Peter Krause', 'Jay Hayden', 'Killian Scott', 'Logan Marshall-Green', 'Sarah Jones', 'Omar Epps', 'Frances Fisher', 'Matt Craven', 'Britt Robertson', 'Jasmin Savoy Brown', 'Hope Davis']</code></pre>
</div>
</div>
<p>On convertis la lite en dataframe pour lui appliquer la fonction value_counts() qui compte le nombre de fois qu’une modalité est retrouvée dans la colonne spécifiée (en l’occurence ActorName)</p>
<div id="cell-11" class="cell" data-execution_count="233">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df_list <span class="op">=</span> pd.DataFrame(lit, columns<span class="op">=</span>[<span class="st">"ActorName"</span>])</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> df_list[<span class="st">'ActorName'</span>].value_counts()</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> counts[counts <span class="op">&gt;=</span> <span class="dv">2</span>] <span class="co"># Ici seul ceux qui ont une apparition &gt; 2 sont sélectionnés</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Enfin on plot le résultat obtenue à l’aide d’un barplot</p>
<div id="cell-13" class="cell" data-execution_count="234">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>counts.plot(kind<span class="op">=</span><span class="st">'bar'</span>, colormap<span class="op">=</span><span class="st">'viridis'</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'ActorName'</span>, fontsize <span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Nomb'</span>, fontsize <span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">60</span>, fontsize<span class="op">=</span><span class="dv">8</span>, ha<span class="op">=</span> <span class="st">'right'</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>plt.show</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Seance7_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="nombre-de-saisons-par-chaine" class="level3">
<h3 class="anchored" data-anchor-id="nombre-de-saisons-par-chaine"><strong>Nombre de saisons par chaine</strong></h3>
<p>Dans un premier temps les date (en format debut - fin) sont séparés et stockées dans deux lists Pour ce faire, deux patern sont recherchés Dans la colonne ‘Date’</p>
<div id="cell-16" class="cell" data-execution_count="235">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pat1 <span class="op">=</span> <span class="st">"(.*?) -"</span> <span class="co"># Celui avant le tiret (date de debut)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>pat2 <span class="op">=</span> <span class="st">"- (.*?) "</span> <span class="co"># ET celui après (date de fin)</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>L1 <span class="op">=</span> [] <span class="co"># Nos deux listes pour stocker les dates</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>L2 <span class="op">=</span> []</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On boucle ensuite sur chaque element de la colonne ‘Date’ pour récupérer chaque élément</p>
<div id="cell-18" class="cell" data-execution_count="236">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> df[<span class="st">'Date'</span>]:</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    sy <span class="op">=</span> re.findall(pat1, i)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    ey <span class="op">=</span> re.findall(pat2, i)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    L1.append(sy[<span class="dv">0</span>])</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    L2.append(ey[<span class="dv">0</span>])</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># chaque valeur de L1 &amp; L2 sont ensuite convertis en integer et ajoutées au df (a travers deux nouvelles colonnes)</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>L1 <span class="op">=</span> [<span class="bu">int</span>(x) <span class="cf">for</span> x <span class="kw">in</span> L1]</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>L2 <span class="op">=</span> [<span class="bu">int</span>(x) <span class="cf">for</span> x <span class="kw">in</span> L2]</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'StartY'</span>]<span class="op">=</span>L1</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'EndY'</span>]<span class="op">=</span>L2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Le nombre de saisons est ainsi calculé en soustrayant la date de fin à celle du debut</p>
<div id="cell-20" class="cell" data-execution_count="237">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Saison'</span>] <span class="op">=</span> df[<span class="st">'EndY'</span>] <span class="op">-</span> df[<span class="st">'StartY'</span>]</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="237">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Titre</th>
<th data-quarto-table-cell-role="th">Nationality</th>
<th data-quarto-table-cell-role="th">Channel</th>
<th data-quarto-table-cell-role="th">Actor</th>
<th data-quarto-table-cell-role="th">Genre</th>
<th data-quarto-table-cell-role="th">Duration</th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">StartY</th>
<th data-quarto-table-cell-role="th">EndY</th>
<th data-quarto-table-cell-role="th">Saison</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Bloodline (2015)</td>
<td>U.S.A.</td>
<td>Netflix</td>
<td>Kyle Chandler;Linda Cardellini;Ben Mendelsohn</td>
<td>Drame , Thriller</td>
<td>42min</td>
<td>2015 - 2017</td>
<td>2015</td>
<td>2017</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>The Fosters</td>
<td>U.S.A.</td>
<td>Freeform</td>
<td>Teri Polo;Sherri Saum;Jake T. Austin</td>
<td>Drame , Famille</td>
<td>42min</td>
<td>2013 - 2018</td>
<td>2013</td>
<td>2018</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Marvel's Luke Cage</td>
<td>U.S.A.</td>
<td>Netflix</td>
<td>Mike Colter;Simone Missick;Alfre Woodard</td>
<td>Fantastique , Action</td>
<td>52min</td>
<td>2016 - 2018</td>
<td>2016</td>
<td>2018</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>The Hollow Crown</td>
<td>Grande-Bretagne</td>
<td>BBC Two</td>
<td>Jamie Ballard;James Fleet;Judi Dench</td>
<td>Drame , Historique</td>
<td>130min</td>
<td>2012 - 2016</td>
<td>2012</td>
<td>2016</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Future Man</td>
<td>U.S.A.</td>
<td>Hulu</td>
<td>Josh Hutcherson;Eliza Coupe;Derek Wilson</td>
<td>Comédie , Science fiction</td>
<td>25min</td>
<td>2017 - 2020</td>
<td>2017</td>
<td>2020</td>
<td>3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>On sort le df pour que les barres de notre graphe soit dans l’ordre croissant</p>
<div id="cell-22" class="cell" data-execution_count="238">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.sort_values(by<span class="op">=</span><span class="st">'Saison'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">8</span>))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>sns.barplot(data<span class="op">=</span>df, x<span class="op">=</span><span class="st">'Channel'</span>, y<span class="op">=</span><span class="st">'Saison'</span>, palette<span class="op">=</span><span class="st">'viridis'</span>, ci<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Seasons vs Channel'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Chaine'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Saisons'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">60</span>, fontsize<span class="op">=</span><span class="dv">10</span>, ha<span class="op">=</span><span class="st">'right'</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\aurel\AppData\Local\Temp\ipykernel_24212\1262005012.py:4: FutureWarning:



The `ci` parameter is deprecated. Use `errorbar=None` for the same effect.


C:\Users\aurel\AppData\Local\Temp\ipykernel_24212\1262005012.py:4: FutureWarning:



Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Seance7_files/figure-html/cell-10-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="durée-en-fonction-du-genre" class="level3">
<h3 class="anchored" data-anchor-id="durée-en-fonction-du-genre"><strong>Durée en fonction du genre</strong></h3>
<p>D’abord, dans une liste, on recupère chaque genre par individu :</p>
<ul>
<li><p>On les séparent sur la base de la virgule à l’aide de la fonction split(” , “)</p></li>
<li><p>Ensuite on supprime les espaces qu’il reste dans chaque élément (on les néttoie)</p></li>
<li><p>Le résultat obtenu pour chaque observation est une liste*</p></li>
<li><p>Et chque liste obtenue est rangée dans une grande liste</p></li>
</ul>
<div id="cell-25" class="cell" data-execution_count="239">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>grand_list <span class="op">=</span> []</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> ele <span class="kw">in</span> df[<span class="st">'Genre'</span>]:</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(ele, <span class="bu">str</span>):</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        each <span class="op">=</span> ele.split(<span class="st">" , "</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        each <span class="op">=</span> [g.strip() <span class="cf">for</span> g <span class="kw">in</span> each]</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        grand_list.append(each)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        grand_list.append(ele)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(grand_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[['Comédie', 'Famille'], ['Drame', 'Policier'], ['Drame', 'Thriller'], ['Comédie'], ['Drame', 'Fantastique', 'Action'], ['Comédie', 'Drame', 'Judiciaire'], ['Drame', 'Fantastique', 'Romance'], ['Drame', 'Policier'], ['Drame', 'Fantastique'], ['Comédie'], ['Comédie'], ['Aventure', 'Comédie', 'Epouvante-horreur', 'Action', 'Animation'], ['Aventure', 'Drame', 'Policier'], ['Comédie', 'Drame', 'Policier'], ['Drame', 'Policier', 'Thriller'], ['Drame', 'Policier'], ['Drame', 'Judiciaire'], ['Policier', 'Thriller'], ['Drame', 'Guerre'], ['Drame', 'Fantastique', 'Espionnage', 'Action'], ['Drame', 'Fantastique'], ['Comédie'], ['Drame'], ['Comédie'], ['Comédie'], ['Arts Martiaux', 'Action', 'Animation'], ['Policier'], ['Drame', 'Thriller', 'Judiciaire'], ['Aventure', 'Drame', 'Science fiction'], ['Comédie', 'Drame', 'Animation'], ['Drame', 'Fantastique'], ['Comédie'], ['Comédie'], ['Comédie', 'Comédie musicale'], ['Drame', 'Policier'], ['Fantastique', 'Policier'], ['Drame', 'Policier'], ['Comédie'], ['Comédie', 'Drame'], ['Drame'], ['Drame', 'Famille'], ['Comédie'], ['Drame', 'Espionnage', 'Thriller'], ['Comédie', 'Drame', 'Policier'], ['Comédie', 'Animation'], ['Drame', 'Policier'], ['Fantastique'], ['Comédie', 'Drame'], ['Drame', 'Historique'], ['Comédie'], ['Drame', 'Policier'], ['Drame', 'Thriller'], ['Comédie', 'Drame'], ['Drame', 'Epouvante-horreur', 'Fantastique'], ['Drame', 'Policier'], ['Comédie'], ['Drame', 'Soap', 'Musical'], ['Policier'], ['Comédie', 'Fantastique'], ['Comédie', 'Drame', 'Fantastique', 'Science fiction'], ['Comédie'], ['Comédie'], ['Comédie', 'Drame', 'Romance'], ['Drame', 'Western'], ['Drame', 'Fantastique', 'Famille'], ['Drame', 'Policier'], ['Comédie'], ['Comédie'], ['Drame', 'Fantastique', 'Médical'], ['Drame', 'Policier'], ['Drame', 'Thriller', 'Action'], ['Policier', 'Thriller', 'Action'], ['Drame', 'Romance'], ['Aventure', 'Action', 'Animation'], ['Comédie', 'Policier'], ['Comédie dramatique', 'Comédie musicale'], ['Comédie', 'Drame'], ['Comédie', 'Famille'], ['Comédie'], ['Aventure', 'Fantastique', 'Science fiction', 'Thriller'], ['Comédie', 'Comédie musicale'], ['Drame', 'Fantastique'], ['Policier'], ['Comédie', 'Animation'], ['Drame', 'Arts Martiaux', 'Action'], ['Aventure', 'Fantastique', 'Science fiction', 'Animation'], ['Comédie', 'Drame', 'Musical'], ['Comédie'], ['Drame', 'Fantastique', 'Policier'], ['Drame'], ['Comédie'], ['Espionnage', 'Thriller'], ['Drame', 'Historique'], ['Drame', 'Policier', 'Thriller'], ['Policier'], ['Drame', 'Policier'], ['Comédie'], ['Drame', 'Science fiction'], ['Drame', 'Historique', 'Policier'], ['Drame'], ['Drame', 'Science fiction', 'Action'], ['Comédie', 'Drame', 'Romance'], ['Drame', 'Science fiction', 'Action'], ['Aventure', 'Science fiction', 'Action'], ['Comédie dramatique'], ['Drame', 'Historique'], ['Drame', 'Thriller'], ['Comédie'], ['Drame', 'Policier'], ['Aventure', 'Comédie', 'Animation'], ['Drame', 'Science fiction', 'Thriller'], ['Aventure', 'Comédie'], ['Comédie', 'Famille'], ['Comédie', 'Drame', 'Fantastique'], ['Comédie', 'Famille'], ['Comédie dramatique', 'Epouvante-horreur', 'Policier'], ['Comédie dramatique', 'Comédie', 'Romance'], ['Aventure', 'Comédie', 'Drame'], ['Drame', 'Fantastique', 'Romance'], ['Drame', 'Policier', 'Thriller'], ['Drame'], ['Drame', 'Action'], ['Drame', 'Thriller'], ['Drame', 'Médical'], ['Comédie', 'Animation'], ['Drame'], ['Comédie'], ['Drame', 'Policier'], ['Comédie dramatique'], ['Drame', 'Espionnage', 'Thriller'], ['Drame'], ['Drame', 'Guerre', 'Historique'], ['Comédie dramatique', 'Action', 'Famille'], ['Comédie'], ['Comédie', 'Drame'], ['Animation'], ['Drame'], ['Drame'], ['Drame', 'Fantastique'], ['Comédie', 'Science fiction'], ['Comédie', 'Famille'], ['Drame', 'Fantastique', 'Action'], ['Drame', 'Science fiction', 'Thriller'], ['Aventure', 'Comédie', 'Animation'], ['Historique'], ['Comédie', 'Drame', 'Policier'], ['Comédie', 'Science fiction', 'Action'], ['Drame', 'Fantastique', 'Science fiction'], ['Drame', 'Historique', 'Espionnage'], ['Drame'], ['Comédie', 'Policier'], ['Policier', 'Science fiction'], ['Drame', 'Epouvante-horreur', 'Fantastique'], ['Drame'], ['Comédie dramatique'], ['Drame', 'Policier'], ['Drame', 'Thriller'], ['Comédie'], ['Comédie', 'Drame'], ['Drame', 'Soap'], ['Comédie', 'Drame', 'Romance', 'Animation'], ['Comédie', 'Drame', 'Action'], ['Comédie'], ['Drame'], ['Drame', 'Fantastique', 'Action'], ['Drame', 'Policier', 'Thriller', 'Biopic'], ['Drame', 'Comédie musicale', 'Action', 'Musical'], ['Comédie'], ['Drame', 'Médical', 'Judiciaire'], ['Drame', 'Fantastique', 'Science fiction'], ['Comédie', 'Epouvante-horreur', 'Thriller'], ['Drame', 'Fantastique'], ['Aventure', 'Action', 'Animation'], ['Aventure', 'Animation'], ['Drame'], ['Drame', 'Espionnage', 'Thriller'], ['Drame', 'Historique', 'Romance'], ['Drame', 'Science fiction', 'Thriller'], ['Drame', 'Epouvante-horreur', 'Fantastique'], ['Drame', 'Historique'], ['Drame', 'Policier'], ['Drame', 'Policier', 'Thriller'], ['Policier', 'Science fiction', 'Thriller'], ['Aventure', 'Comédie dramatique', 'Fantastique', 'Action', 'Animation'], ['Epouvante-horreur', 'Thriller'], ['Drame', 'Fantastique', 'Action'], ['Drame', 'Thriller'], ['Drame', 'Fantastique'], ['Drame', 'Thriller'], ['Drame'], ['Comédie dramatique', 'Policier'], ['Epouvante-horreur', 'Thriller'], ['Drame', 'Epouvante-horreur', 'Fantastique'], ['Comédie'], ['Drame', 'Policier'], ['Drame'], ['Comédie'], ['Drame', 'Thriller'], ['Drame', 'Policier', 'Action'], ['Drame', 'Policier', 'Judiciaire'], ['Comédie dramatique', 'Policier'], ['Drame'], ['Aventure', 'Drame', 'Historique'], ['Thriller', 'Action'], ['Comédie dramatique'], ['Aventure', 'Science fiction', 'Action'], ['Comédie dramatique'], ['Aventure', 'Drame', 'Fantastique'], ['Policier', 'Action', 'Médical'], ['Drame', 'Fantastique', 'Historique'], ['Comédie', 'Drame', 'Romance'], ['Drame', 'Fantastique'], ['Drame'], ['Drame', 'Soap'], ['Drame', 'Action'], ['Drame', 'Policier', 'Thriller'], ['Comédie', 'Drame', 'Comédie musicale'], ['Drame', 'Policier'], ['Drame', 'Science fiction', 'Thriller'], ['Aventure', 'Fantastique', 'Animation'], ['Policier'], ['Science fiction'], ['Comédie'], ['Aventure', 'Animation'], ['Comédie', 'Drame'], ['Comédie'], ['Comédie', 'Action', 'Websérie'], ['Comédie', 'Romance'], ['Drame', 'Policier', 'Action'], ['Animation'], ['Comédie', 'Animation'], ['Comédie', 'Animation'], ['Drame', 'Soap'], ['Comédie', 'Drame', 'Romance'], ['Drame', 'Historique'], ['Comédie'], ['Comédie'], ['Drame', 'Policier', 'Thriller'], ['Comédie dramatique'], ['Drame', 'Thriller'], ['Comédie dramatique'], ['Fantastique', 'Action'], ['Drame', 'Thriller'], ['Epouvante-horreur', 'Policier', 'Action'], ['Aventure', 'Drame', 'Thriller'], ['Aventure', 'Drame', 'Science fiction'], ['Comédie'], ['Comédie dramatique'], ['Drame', 'Fantastique', 'Policier'], ['Comédie', 'Guerre'], ['Comédie'], ['Comédie', 'Fantastique', 'Policier'], ['Drame', 'Judiciaire'], ['Comédie dramatique', 'Comédie', 'Drame'], ['Drame', 'Fantastique', 'Science fiction', 'Action'], ['Aventure', 'Drame'], ['Comédie', 'Drame', 'Judiciaire'], ['Comédie dramatique', 'Drame'], ['Drame', 'Thriller'], ['Drame', 'Policier'], ['Drame', 'Guerre', 'Action'], ['Comédie'], ['Thriller', 'Action'], ['Drame', 'Historique', 'Policier'], ['Drame', 'Fantastique'], ['Drame', 'Romance'], ['Drame', 'Judiciaire'], ['Drame', 'Thriller'], ['Drame', 'Epouvante-horreur', 'Fantastique'], ['Comédie', 'Drame'], ['Drame', 'Fantastique', 'Science fiction'], ['Comédie', 'Romance'], ['Comédie'], ['Drame', 'Policier'], ['Drame', 'Science fiction', 'Thriller'], ['Drame', 'Policier'], ['Comédie', 'Epouvante-horreur'], ['Comédie dramatique', 'Action', 'Animation'], ['Comédie', 'Espionnage', 'Action'], ['Drame', 'Romance'], ['Drame', 'Fantastique', 'Thriller'], ['Comédie dramatique'], ['Drame', 'Science fiction'], ['Comédie dramatique'], ['Fantastique', 'Romance', 'Action'], ['Drame', 'Policier', 'Thriller'], ['Drame', 'Fantastique', 'Science fiction'], ['Drame'], ['Comédie', 'Policier'], ['Drame', 'Science fiction', 'Thriller'], ['Drame', 'Policier', 'Science fiction', 'Thriller'], ['Comédie', 'Drame', 'Action'], ['Thriller'], ['Drame', 'Policier', 'Science fiction'], ['Drame'], ['Comédie'], ['Thriller'], ['Comédie'], ['Drame', 'Guerre', 'Action'], ['Comédie', 'Policier'], ['Science fiction', 'Thriller'], ['Policier'], ['Drame', 'Historique'], ['Drame'], ['Drame', 'Thriller', 'Action'], ['Drame', 'Thriller'], ['Drame', 'Fantastique', 'Policier'], ['Drame', 'Historique'], ['Drame', 'Science fiction', 'Action'], ['Comédie dramatique', 'Drame', 'Judiciaire'], ['Comédie'], ['Comédie'], ['Comédie', 'Science fiction', 'Action'], ['Drame', 'Policier', 'Judiciaire'], ['Comédie'], ['Epouvante-horreur', 'Science fiction', 'Animation'], ['Drame', 'Policier', 'Thriller'], ['Comédie', 'Famille'], ['Comédie'], ['Drame', 'Judiciaire'], ['Comédie', 'Epouvante-horreur'], ['Fantastique', 'Action', 'Animation'], ['Drame', 'Science fiction'], ['Policier', 'Judiciaire'], ['Drame', 'Policier', 'Thriller'], ['Aventure', 'Fantastique'], ['Aventure', 'Action', 'Animation', 'Websérie'], ['Comédie'], ['Drame', 'Science fiction', 'Espionnage', 'Thriller'], ['Drame', 'Science fiction', 'Thriller'], ['Drame', 'Musical'], ['Comédie'], ['Drame', 'Historique', 'Médical'], ['Drame', 'Epouvante-horreur', 'Thriller'], ['Drame', 'Science fiction'], ['Aventure', 'Fantastique', 'Science fiction'], ['Drame', 'Thriller'], ['Comédie', 'Judiciaire'], ['Comédie'], ['Comédie'], ['Drame', 'Epouvante-horreur', 'Fantastique', 'Policier'], ['Drame'], ['Comédie', 'Animation', 'Sport event'], ['Drame', 'Romance'], ['Comédie dramatique', 'Médical'], ['Drame', 'Thriller'], ['Comédie'], ['Drame', 'Fantastique'], ['Drame', 'Thriller'], ['Comédie dramatique'], ['Drame', 'Romance', 'Animation', 'Musical'], ['Espionnage', 'Action'], ['Drame'], ['Comédie'], ['Drame', 'Fantastique'], ['Comédie', 'Espionnage', 'Thriller'], ['Drame', 'Thriller'], ['Drame', 'Policier', 'Thriller'], ['Comédie', 'Comédie musicale'], ['Thriller'], ['Drame', 'Policier', 'Thriller'], ['Drame', 'Policier', 'Thriller'], ['Drame'], ['Drame', 'Fantastique'], ['Drame', 'Judiciaire']]</code></pre>
</div>
</div>
<p>Ensuite ce qu’on va chercher a faire cest de créer un dataframe dans lequel on va avoir : - Pour une obervation, une colonne pour chaque genre avec la durée</p>
<p>Pour connaitre alors le nombre de colonnes à créer pour les genre, on boucle sur chaque liste de grand_list:</p>
<div id="cell-27" class="cell" data-execution_count="240">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>ls <span class="op">=</span> []</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> nb_genr <span class="kw">in</span> grand_list:</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    ls.append(<span class="bu">len</span>(nb_genr))</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="bu">max</span>(ls) <span class="co"># Colonnes max a créer = 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="240">
<pre><code>5</code></pre>
</div>
</div>
<div id="cell-28" class="cell" data-execution_count="241">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On crée alors un df avec 5 colonnes Genre 1, 2, ..., 5</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>genre_df <span class="op">=</span> pd.DataFrame(grand_list, columns<span class="op">=</span>[<span class="ss">f'Genre</span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">'</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>)])</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>genre_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="241">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Genre1</th>
<th data-quarto-table-cell-role="th">Genre2</th>
<th data-quarto-table-cell-role="th">Genre3</th>
<th data-quarto-table-cell-role="th">Genre4</th>
<th data-quarto-table-cell-role="th">Genre5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Comédie</td>
<td>Famille</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Drame</td>
<td>Policier</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Drame</td>
<td>Thriller</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Comédie</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Drame</td>
<td>Fantastique</td>
<td>Action</td>
<td>None</td>
<td>None</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Les durées sont ensuite nettoyées : - On supprime les ‘min’ dans chaque valeur - On remplace les valeurs manquantes par des 0 - On convertit les valeurs en int</p>
<p>Enfin on join les deux df (horizontalement)</p>
<div id="cell-30" class="cell" data-execution_count="242">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Duration'</span>] <span class="op">=</span> df[<span class="st">'Duration'</span>].<span class="bu">str</span>.replace(<span class="st">'min'</span>, <span class="st">''</span>).fillna(<span class="st">'0'</span>).astype(<span class="bu">int</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat([df, genre_df], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="242">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Titre</th>
<th data-quarto-table-cell-role="th">Nationality</th>
<th data-quarto-table-cell-role="th">Channel</th>
<th data-quarto-table-cell-role="th">Actor</th>
<th data-quarto-table-cell-role="th">Genre</th>
<th data-quarto-table-cell-role="th">Duration</th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">StartY</th>
<th data-quarto-table-cell-role="th">EndY</th>
<th data-quarto-table-cell-role="th">Saison</th>
<th data-quarto-table-cell-role="th">Genre1</th>
<th data-quarto-table-cell-role="th">Genre2</th>
<th data-quarto-table-cell-role="th">Genre3</th>
<th data-quarto-table-cell-role="th">Genre4</th>
<th data-quarto-table-cell-role="th">Genre5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">234</td>
<td>Modern Family</td>
<td>U.S.A.</td>
<td>ABC</td>
<td>Ed O'Neill;Julie Bowen;Ty Burrell</td>
<td>Comédie , Famille</td>
<td>22</td>
<td>2009 - 2020</td>
<td>2009</td>
<td>2020</td>
<td>11</td>
<td>Drame</td>
<td>Historique</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>Hawaii Five-0 (2010)</td>
<td>U.S.A.</td>
<td>CBS</td>
<td>Alex O'Loughlin;Scott Caan;Chi McBride</td>
<td>Drame , Policier</td>
<td>42</td>
<td>2010 - 2020</td>
<td>2010</td>
<td>2020</td>
<td>10</td>
<td>Aventure</td>
<td>Drame</td>
<td>Science fiction</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">167</td>
<td>Homeland</td>
<td>U.S.A.</td>
<td>Showtime</td>
<td>Claire Danes;Mandy Patinkin;Maury Sterling</td>
<td>Drame , Thriller</td>
<td>42</td>
<td>2011 - 2020</td>
<td>2011</td>
<td>2020</td>
<td>9</td>
<td>Comédie</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">58</td>
<td>The Middle</td>
<td>U.S.A.</td>
<td>ABC</td>
<td>Patricia Heaton;Neil Flynn;Eden Sher</td>
<td>Comédie</td>
<td>22</td>
<td>2009 - 2018</td>
<td>2009</td>
<td>2018</td>
<td>9</td>
<td>Comédie</td>
<td>Fantastique</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">127</td>
<td>Arrow</td>
<td>U.S.A.</td>
<td>CW</td>
<td>Stephen Amell;Susanna Thompson;David Ramsey</td>
<td>Drame , Fantastique , Action</td>
<td>42</td>
<td>2012 - 2020</td>
<td>2012</td>
<td>2020</td>
<td>8</td>
<td>Drame</td>
<td>Policier</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>On va ensuite melt (renverser en qlq sorte le dataframe) pour avoir tous les genres dans une même colonne avec la durée en face</p>
<div id="cell-32" class="cell" data-execution_count="243">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df.melt(id_vars<span class="op">=</span>[<span class="st">'Duration'</span>], value_vars<span class="op">=</span>[<span class="st">'Genre1'</span>, <span class="st">'Genre2'</span>, <span class="st">'Genre3'</span>, <span class="st">'Genre4'</span>, <span class="st">'Genre5'</span>], var_name<span class="op">=</span><span class="st">'Genre'</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>df2.drop(columns<span class="op">=</span>[<span class="st">'Genre'</span>], inplace<span class="op">=</span><span class="va">True</span>) <span class="co"># la colonne 'Genre' (qui contient finalement (après le melt) les colonnes Genre1, 2, ..., 5) est ensuite supprimée </span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># On aggrège ensuite les durées par genre en les moyennant pour chaque genre</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>pargenre <span class="op">=</span> df2.groupby(<span class="st">'value'</span>)[<span class="st">'Duration'</span>].mean()</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>pargenre.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="243">
<pre><code>value
Action           40.840909
Animation        41.230769
Arts Martiaux    33.500000
Aventure         44.280000
Biopic           22.000000
Name: Duration, dtype: float64</code></pre>
</div>
</div>
<p>On peut ensuite afficher le résultat sous forme de graphique à bar (barplot)</p>
<div id="cell-34" class="cell" data-execution_count="244">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>pargenre.plot(kind<span class="op">=</span><span class="st">'bar'</span>, colormap<span class="op">=</span><span class="st">'viridis'</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Genre'</span>, fontsize <span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Durée'</span>, fontsize <span class="op">=</span> <span class="dv">10</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">60</span>, fontsize<span class="op">=</span><span class="dv">10</span>, ha<span class="op">=</span> <span class="st">'right'</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>plt.show</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Seance7_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="nombre-de-séries-par-année" class="level3">
<h3 class="anchored" data-anchor-id="nombre-de-séries-par-année"><strong>Nombre de séries par année</strong></h3>
<div id="cell-36" class="cell" data-execution_count="245">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> df[[<span class="st">'Titre'</span>, <span class="st">'StartY'</span>, <span class="st">'EndY'</span>]] <span class="co"># On récupère les 3 colonnes qui nous interresse ici</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Dans un premier temps, Pour savoir la période sur laquelle on va travailler on determine les années minimales et maximales</p>
<div id="cell-38" class="cell" data-execution_count="246">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>mn <span class="op">=</span> df3[<span class="st">'StartY'</span>].<span class="bu">min</span>()</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>mx <span class="op">=</span> df3[<span class="st">'EndY'</span>].<span class="bu">max</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On crée une list contenant toute les années de l’année minimal à l’année max</p>
<p>Pourquoi on crée cette liste car elle va nous servir a nommer les colonnes de notre df</p>
<p>Dans ce df, on va avoir pour chaque année (en colonne et les films en ligne) si le film a été diffusé sur cette période la valeur de 1 à l’intersection</p>
<div id="cell-40" class="cell" data-execution_count="247">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>years <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(mn, mx <span class="op">+</span> <span class="dv">1</span>))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>df_anne <span class="op">=</span> pd.DataFrame(<span class="dv">0</span>, index<span class="op">=</span>df3.index, columns<span class="op">=</span>years) <span class="co"># On met 0 comme valeur par defaut pour chaque obervation</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, row <span class="kw">in</span> df3.iterrows(): <span class="co"># ici on va boucler sur chque ligne (df.interrows())</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> <span class="bu">int</span>(row[<span class="st">'StartY'</span>]) <span class="co"># on récupère la date de debut</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> <span class="bu">int</span>(row[<span class="st">'EndY'</span>]) <span class="co"># et celle de fin</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    df_anne.loc[index, start:end] <span class="op">+=</span> <span class="dv">1</span> <span class="co">#et on ajoute 1 si pour ce film l'année (en colonne) se situe entre sa date de debut et de fin</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># En gros si pour cette année la (en colonne) le film a été diffusé on va avoir comme valeur 1</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>yearly_counts <span class="op">=</span> df_anne.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">0</span>) <span class="co"># Puis on somme toutes les lignes ce qui va donner pour chaque colonne (année) le nombre de film diffusé</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(yearly_counts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2009     34
2010     70
2011    100
2012    128
2013    157
2014    163
2015    176
2016    180
2017    168
2018    131
2019     87
2020     44
dtype: int64</code></pre>
</div>
</div>
<p>On peut maintenant présenter les résultats obtenus</p>
<div id="cell-42" class="cell" data-execution_count="248">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>bars <span class="op">=</span> plt.bar(yearly_counts.index, yearly_counts.values, color<span class="op">=</span><span class="st">'green'</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Time'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Numb'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Numb de films par an'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Annotations</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> bar <span class="kw">in</span> bars:</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    yval <span class="op">=</span> bar.get_height()</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    plt.text(bar.get_x() <span class="op">+</span> bar.get_width()<span class="op">/</span><span class="dv">2</span>, yval, <span class="bu">int</span>(yval), ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Seance7_files/figure-html/cell-20-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="partie-2-réseau" class="level2">
<h2 class="anchored" data-anchor-id="partie-2-réseau">Partie 2 : Réseau</h2>
<div id="cell-44" class="cell" data-execution_count="249">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="249">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Titre</th>
<th data-quarto-table-cell-role="th">Nationality</th>
<th data-quarto-table-cell-role="th">Channel</th>
<th data-quarto-table-cell-role="th">Actor</th>
<th data-quarto-table-cell-role="th">Genre</th>
<th data-quarto-table-cell-role="th">Duration</th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">StartY</th>
<th data-quarto-table-cell-role="th">EndY</th>
<th data-quarto-table-cell-role="th">Saison</th>
<th data-quarto-table-cell-role="th">Genre1</th>
<th data-quarto-table-cell-role="th">Genre2</th>
<th data-quarto-table-cell-role="th">Genre3</th>
<th data-quarto-table-cell-role="th">Genre4</th>
<th data-quarto-table-cell-role="th">Genre5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">234</td>
<td>Modern Family</td>
<td>U.S.A.</td>
<td>ABC</td>
<td>Ed O'Neill;Julie Bowen;Ty Burrell</td>
<td>Comédie , Famille</td>
<td>22</td>
<td>2009 - 2020</td>
<td>2009</td>
<td>2020</td>
<td>11</td>
<td>Drame</td>
<td>Historique</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">28</td>
<td>Hawaii Five-0 (2010)</td>
<td>U.S.A.</td>
<td>CBS</td>
<td>Alex O'Loughlin;Scott Caan;Chi McBride</td>
<td>Drame , Policier</td>
<td>42</td>
<td>2010 - 2020</td>
<td>2010</td>
<td>2020</td>
<td>10</td>
<td>Aventure</td>
<td>Drame</td>
<td>Science fiction</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">167</td>
<td>Homeland</td>
<td>U.S.A.</td>
<td>Showtime</td>
<td>Claire Danes;Mandy Patinkin;Maury Sterling</td>
<td>Drame , Thriller</td>
<td>42</td>
<td>2011 - 2020</td>
<td>2011</td>
<td>2020</td>
<td>9</td>
<td>Comédie</td>
<td>None</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">58</td>
<td>The Middle</td>
<td>U.S.A.</td>
<td>ABC</td>
<td>Patricia Heaton;Neil Flynn;Eden Sher</td>
<td>Comédie</td>
<td>22</td>
<td>2009 - 2018</td>
<td>2009</td>
<td>2018</td>
<td>9</td>
<td>Comédie</td>
<td>Fantastique</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">127</td>
<td>Arrow</td>
<td>U.S.A.</td>
<td>CW</td>
<td>Stephen Amell;Susanna Thompson;David Ramsey</td>
<td>Drame , Fantastique , Action</td>
<td>42</td>
<td>2012 - 2020</td>
<td>2012</td>
<td>2020</td>
<td>8</td>
<td>Drame</td>
<td>Policier</td>
<td>None</td>
<td>None</td>
<td>None</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Dans un premier on va récupérer tous les genres de notre jeu de données :</p>
<div id="cell-46" class="cell" data-execution_count="250">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>all_genres <span class="op">=</span> [pd.Series(grand_list).explode().values]</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>all_genres <span class="op">=</span> pd.Series(all_genres[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ensuite on peut voir la distribution des différents genres</p>
<div id="cell-48" class="cell" data-execution_count="251">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>genres_uniques <span class="op">=</span> all_genres.unique()</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>genre_counts <span class="op">=</span> all_genres.value_counts()</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"""Liste des genres : </span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="sc">{</span>genres_uniques<span class="sc">}</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="ss">=====================================================</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="ss">      </span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="ss">Distribution des genres :</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="ss"> </span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="sc">{</span>genre_counts<span class="sc">.</span>head(<span class="dv">15</span>)<span class="sc">}</span><span class="ss">"""</span>) <span class="co"># 15 genres les plus représentés</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Liste des genres : 
['Comédie' 'Famille' 'Drame' 'Policier' 'Thriller' 'Fantastique' 'Action'
 'Judiciaire' 'Romance' 'Aventure' 'Epouvante-horreur' 'Animation'
 'Guerre' 'Espionnage' 'Arts Martiaux' 'Science fiction'
 'Comédie musicale' 'Historique' 'Soap' 'Musical' 'Western' 'Médical'
 'Comédie dramatique' 'Biopic' 'Websérie' 'Sport event']

=====================================================
      
Distribution des genres :
 
Drame                 213
Comédie               114
Policier               71
Thriller               63
Fantastique            53
Action                 44
Science fiction        38
Animation              26
Aventure               25
Comédie dramatique     23
Romance                17
Historique             16
Epouvante-horreur      16
Judiciaire             14
Espionnage             10
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="cell-49" class="cell" data-execution_count="252">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>cooccurrence_matrix <span class="op">=</span> pd.DataFrame(<span class="dv">0</span>, index<span class="op">=</span>genres_uniques, columns<span class="op">=</span>genres_uniques)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(all_genres)):</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(i, <span class="bu">len</span>(all_genres)):</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>        genre_i <span class="op">=</span> all_genres[i]</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>        genre_j <span class="op">=</span> all_genres[j]</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>        cooccurrence_matrix.at[genre_i, genre_j] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> genre_i <span class="op">!=</span> genre_j:</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>            cooccurrence_matrix.at[genre_j, genre_i] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="co"># print(cooccurrence_matrix) # pour afficher la matrice mais vu quelle est trop grande on la laisse en commentaire si vous voulez la voir</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Maintenant on va représenter notre réseau sur un graphe où les noeuds auront une taille proportionnelle à la fréquence dans la matrice de cooccurence et où les arêtes (liens) auront proportionnelles à la co-occurrence</p>
<div id="cell-51" class="cell" data-execution_count="253">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> nx.Graph()</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Graphe G auquel on ajoute des noeuds</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> genre <span class="kw">in</span> genres_uniques:</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    R.add_node(genre, size<span class="op">=</span>genre_counts[genre])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Puis on ajoute les arêtes</p>
<div id="cell-53" class="cell" data-execution_count="254">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> cooccurrence_matrix.index:</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> cooccurrence_matrix.columns:</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> cooccurrence_matrix.at[i, j] <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>            R.add_edge(i, j, weight<span class="op">=</span>cooccurrence_matrix.at[i, j])</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>R.remove_edges_from(nx.selfloop_edges(R))  <span class="co"># supprimer les boucles (les neouds sont liés à eux même donc on retire cette liaison)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Maitenant que les noeuds et les arrêtes ont étés ajoutées au graphe, on va maitenant définir leur taille, leur poids et leur position en fonction de la matrice de cooccurence</p>
<div id="cell-55" class="cell" data-execution_count="255">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># La taille qu'on prend en racine carré sinon les noeuds sonr trop grands</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>node_sizes <span class="op">=</span> [np.sqrt(R.nodes[genre][<span class="st">'size'</span>] <span class="op">+</span> <span class="dv">1</span>) <span class="op">*</span> <span class="dv">100</span> <span class="cf">for</span> genre <span class="kw">in</span> R.nodes]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Le poids</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>edge_weights <span class="op">=</span> [R.edges[edge][<span class="st">'weight'</span>] <span class="op">*</span> <span class="fl">0.05</span> <span class="cf">for</span> edge <span class="kw">in</span> R.edges]</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co"># La position</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>pos <span class="op">=</span> nx.spring_layout(R, k<span class="op">=</span><span class="dv">1</span>, iterations<span class="op">=</span><span class="dv">100</span>, seed<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Couleurs des nœuds</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>node_colors <span class="op">=</span> sns.color_palette(<span class="st">"husl"</span>, <span class="bu">len</span>(R.nodes))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On obtient le graphique ci-dessous qui</p>
<div id="cell-57" class="cell" data-execution_count="256">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">15</span>))</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>nx.draw_networkx_nodes(R, pos, node_size<span class="op">=</span>node_sizes, node_color<span class="op">=</span>node_colors, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>nx.draw_networkx_edges(R, pos, width<span class="op">=</span>edge_weights, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>nx.draw_networkx_labels(R, pos, font_size<span class="op">=</span><span class="dv">11</span>, font_weight<span class="op">=</span><span class="dv">550</span>, font_color<span class="op">=</span><span class="bu">dict</span>(<span class="bu">zip</span>(R.nodes, node_colors)), font_family<span class="op">=</span><span class="st">'sans-serif'</span>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>plt.axis(<span class="st">'off'</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">"Réseau des Genres"</span>, fontsize<span class="op">=</span><span class="dv">15</span>, y<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Seance7_files/figure-html/cell-28-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>