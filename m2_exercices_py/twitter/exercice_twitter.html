<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>exercice_twitter</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="exercice_twitter_files/libs/clipboard/clipboard.min.js"></script>
<script src="exercice_twitter_files/libs/quarto-html/quarto.js"></script>
<script src="exercice_twitter_files/libs/quarto-html/popper.min.js"></script>
<script src="exercice_twitter_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="exercice_twitter_files/libs/quarto-html/anchor.min.js"></script>
<link href="exercice_twitter_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="exercice_twitter_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="exercice_twitter_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="exercice_twitter_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="exercice_twitter_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<p>Nico et Aurel</p>
<section id="twitter" class="level1">
<h1>Twitter</h1>
<p>Dans ce notebook, nous présentons une analyse des tweets des différents députés français afin de comprendre leur dynamique et leur structure.</p>
<section id="chargement-des-librairies" class="level2">
<h2 class="anchored" data-anchor-id="chargement-des-librairies">Chargement des librairies</h2>
<p>Les librairies que nous utiliserons dans ce notebook sont :</p>
<div id="cell-3" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> wordcloud <span class="im">import</span> WordCloud</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> Counter</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On importe maintenant nos jeux de données</p>
<div id="cell-5" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>d1 <span class="op">=</span> pd.read_excel(<span class="st">"Data/Tweet/data_tweet.xlsx"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>d2 <span class="op">=</span> pd.read_excel(<span class="st">"Data/Tweet/data_retweet.xlsx"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.read_excel(<span class="st">"Data/Tweet/depute.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Puis on va concatener nos dataframe de tweets et de retweets en un seul jeu de données. Ici il s’agit d’une simple supperposition des deux jeux de données.</p>
<div id="cell-7" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.concat([d1, d2], axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour éviter qu'à chaque fois on fasse des df.head(), on crée une fonction pour aller plus vite:</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> h(d):</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> d.head()</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>h(df1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">retweet</th>
<th data-quarto-table-cell-role="th">date_tweet</th>
<th data-quarto-table-cell-role="th">date_tweet_original</th>
<th data-quarto-table-cell-role="th">text</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>@_didierparis</td>
<td>1573960903082577920</td>
<td>no</td>
<td>Sun Sep 25 09:01:36 +0000 2022</td>
<td>NaN</td>
<td>Marie-Louise Fort a porté un engagement politi...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>@_didierparis</td>
<td>1248014208781790976</td>
<td>no</td>
<td>Wed Apr 08 22:25:49 +0000 2020</td>
<td>NaN</td>
<td>Face au #Covid19\nLe @gouvernementFR facilite ...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>@_didierparis</td>
<td>1248991409954225920</td>
<td>no</td>
<td>Sat Apr 11 15:08:51 +0000 2020</td>
<td>NaN</td>
<td>Ensemble, nous formons la #FranceUnie contre l...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>@_didierparis</td>
<td>1248010336503868928</td>
<td>no</td>
<td>Wed Apr 08 22:10:25 +0000 2020</td>
<td>NaN</td>
<td>Face au #Covid19\nAfin de faciliter le verseme...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>@_didierparis</td>
<td>1250310724410150912</td>
<td>no</td>
<td>Wed Apr 15 06:31:21 +0000 2020</td>
<td>NaN</td>
<td>🇫🇷 🏛 #DirectAN #QAG 🏛🇫🇷\n«&nbsp;Il appartient au @g...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Maintenant ce qu’on constate c’est que dans les identifiants utilisateurs (les <code>@</code>) des députés il y a des majuscules. On va tout mettre en miniscule pour faciliter notre analyse et éviter que la personne soit considérée comme autre entité du fait d’une majuscule dans son <code>@</code></p>
<div id="cell-9" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> col_low(var):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pd.isna(var):</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> var</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> var.lower()</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">'name'</span>] <span class="op">=</span> df1[<span class="st">'name'</span>].<span class="bu">apply</span>(col_low)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'Twitter'</span>] <span class="op">=</span> df2[<span class="st">'Twitter'</span>].<span class="bu">apply</span>(col_low)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A présent, nous allons ajouter les noms et les parties politiques des députés dans le jeu de données df1.</p>
<p>Pour ce faire, on va récupérer les noms et les parti politiques associété dans df2, et les merge à df1 par rapport à leur id utilisatuers</p>
<div id="cell-11" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df2_cop <span class="op">=</span> df2[[<span class="st">'Twitter'</span>, <span class="st">'Nom'</span>, <span class="st">'Parti'</span>]] <span class="co"># On récupère les infos dont on a besoin</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.merge(df1, df2_cop, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'name'</span>, right_on<span class="op">=</span><span class="st">'Twitter'</span>) <span class="co"># ET on merge les deux pour avoir un df final</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>h(df)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>df.to_csv(<span class="st">"df.csv"</span>, index <span class="op">=</span> <span class="va">False</span>, encoding<span class="op">=</span><span class="st">'utf8'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="gestion-des-valeurs-manquantes" class="level3">
<h3 class="anchored" data-anchor-id="gestion-des-valeurs-manquantes">Gestion des valeurs manquantes</h3>
<p>Ici on constate qu’il y a 4.7% de valeurs manquantes dans les partis politiques. Pour simplifier notre exploration, elles seront supprimées</p>
<div id="cell-13" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df.isna().mean() <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>name                    0.000000
id                      0.000000
retweet                 0.000000
date_tweet              0.000000
date_tweet_original    52.146428
text                    0.001904
Twitter                 0.000000
Nom                     0.000000
Parti                   4.747725
dtype: float64</code></pre>
</div>
</div>
<div id="cell-14" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>df.dropna(subset<span class="op">=</span>[<span class="st">'Parti'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df.drop(columns<span class="op">=</span>[<span class="st">'Twitter'</span>], inplace<span class="op">=</span><span class="va">True</span>) <span class="co"># On supprimer cette colonne car on en a plus besoin</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ensuite on va créer une variable ‘month’ qui va contenir nos dates au format ‘mois-année’ (type : string). Cela permettra par la suite de grouper les obervations par mois</p>
<div id="cell-16" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'month'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date_tweet'</span>]).dt.strftime(<span class="st">'%b-%Y'</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>h(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\aurel\AppData\Local\Temp\ipykernel_33356\2450480701.py:1: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  df['month'] = pd.to_datetime(df['date_tweet']).dt.strftime('%b-%Y')</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">retweet</th>
<th data-quarto-table-cell-role="th">date_tweet</th>
<th data-quarto-table-cell-role="th">date_tweet_original</th>
<th data-quarto-table-cell-role="th">text</th>
<th data-quarto-table-cell-role="th">Nom</th>
<th data-quarto-table-cell-role="th">Parti</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>@_didierparis</td>
<td>1573960903082577920</td>
<td>no</td>
<td>Sun Sep 25 09:01:36 +0000 2022</td>
<td>NaN</td>
<td>Marie-Louise Fort a porté un engagement politi...</td>
<td>m. didier paris</td>
<td>Renaissance</td>
<td>Sep-2022</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>@_didierparis</td>
<td>1248014208781790976</td>
<td>no</td>
<td>Wed Apr 08 22:25:49 +0000 2020</td>
<td>NaN</td>
<td>Face au #Covid19\nLe @gouvernementFR facilite ...</td>
<td>m. didier paris</td>
<td>Renaissance</td>
<td>Apr-2020</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>@_didierparis</td>
<td>1248991409954225920</td>
<td>no</td>
<td>Sat Apr 11 15:08:51 +0000 2020</td>
<td>NaN</td>
<td>Ensemble, nous formons la #FranceUnie contre l...</td>
<td>m. didier paris</td>
<td>Renaissance</td>
<td>Apr-2020</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>@_didierparis</td>
<td>1248010336503868928</td>
<td>no</td>
<td>Wed Apr 08 22:10:25 +0000 2020</td>
<td>NaN</td>
<td>Face au #Covid19\nAfin de faciliter le verseme...</td>
<td>m. didier paris</td>
<td>Renaissance</td>
<td>Apr-2020</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>@_didierparis</td>
<td>1250310724410150912</td>
<td>no</td>
<td>Wed Apr 15 06:31:21 +0000 2020</td>
<td>NaN</td>
<td>🇫🇷 🏛 #DirectAN #QAG 🏛🇫🇷\n«&nbsp;Il appartient au @g...</td>
<td>m. didier paris</td>
<td>Renaissance</td>
<td>Apr-2020</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="nombre-de-tweets-par-partis-politiques-par-mois" class="level2">
<h2 class="anchored" data-anchor-id="nombre-de-tweets-par-partis-politiques-par-mois"><strong>Nombre de tweets par partis politiques par mois</strong></h2>
<p>Pour ce faire nous allons présenter 2 graphiques :</p>
<ul>
<li>Un graph pour les tweets</li>
<li>Un graph pour les retweets</li>
</ul>
<p>Dans un premier temps on va grouper les twweets (ou retweets) par mois et par parti politiques pour avoir leur nombre</p>
<div id="cell-19" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>retw <span class="op">=</span> df[df[<span class="st">'retweet'</span>]<span class="op">==</span><span class="st">'yes'</span>].groupby([<span class="st">'month'</span>, <span class="st">'Parti'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'retweets'</span>) <span class="co"># retweets</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>tw <span class="op">=</span> df[df[<span class="st">'retweet'</span>]<span class="op">==</span><span class="st">'no'</span>].groupby([<span class="st">'month'</span>, <span class="st">'Parti'</span>]).size().reset_index(name<span class="op">=</span><span class="st">'tweets'</span>) <span class="co"># tweets</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On obtient deux dataframes dans lesquels on a la date, le parti et nombre de tweets/retweets qu’il a posté</p>
<div id="cell-21" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>h(retw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">Parti</th>
<th data-quarto-table-cell-role="th">retweets</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Apr-2011</td>
<td>Démocrate (MoDem et Indépendants)</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Apr-2011</td>
<td>Renaissance</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Apr-2012</td>
<td>Démocrate (MoDem et Indépendants)</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Apr-2012</td>
<td>La France insoumise - Nouvelle Union Populaire...</td>
<td>16</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Apr-2012</td>
<td>Les Républicains</td>
<td>78</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-22" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>h(tw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">Parti</th>
<th data-quarto-table-cell-role="th">tweets</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Apr-2010</td>
<td>Les Républicains</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Apr-2010</td>
<td>Renaissance</td>
<td>6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Apr-2011</td>
<td>Démocrate (MoDem et Indépendants)</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Apr-2011</td>
<td>Les Républicains</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Apr-2011</td>
<td>Renaissance</td>
<td>18</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="les-retweets" class="level4">
<h4 class="anchored" data-anchor-id="les-retweets"><strong>Les retweets</strong></h4>
<p>D’abord, nous pivotons cette table afin d’avoir les partis en colonnes (chaque parti devient une variable) et avoir pour chaque mois, en ligne, le nombre de tweets.</p>
<p>Ensuite on convertis nos mois en date et trie notre dataframe en fonction des mois (pour qu’il aille du plus ancien eau plus récent)</p>
<p>Enfin pour avoir les noms des mois sur nos axes x, on change le formattage de nos date pour une format : ‘mois-année’</p>
<div id="cell-25" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>retw <span class="op">=</span> retw.pivot(index<span class="op">=</span><span class="st">'month'</span>, columns<span class="op">=</span><span class="st">'Parti'</span>, values<span class="op">=</span><span class="st">'retweets'</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>retw.index <span class="op">=</span> pd.to_datetime(retw.index, <span class="bu">format</span><span class="op">=</span><span class="st">'%b-%Y'</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>retw <span class="op">=</span> retw.sort_index()</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>retw.index <span class="op">=</span> retw.index.strftime(<span class="st">'%b-%Y'</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>h(retw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Parti</th>
<th data-quarto-table-cell-role="th">Démocrate (MoDem et Indépendants)</th>
<th data-quarto-table-cell-role="th">Gauche démocrate et républicaine - NUPES</th>
<th data-quarto-table-cell-role="th">Horizons et apparentés</th>
<th data-quarto-table-cell-role="th">La France insoumise - Nouvelle Union Populaire écologique et sociale</th>
<th data-quarto-table-cell-role="th">Les Républicains</th>
<th data-quarto-table-cell-role="th">Libertés, Indépendants, Outre-mer et Territoires</th>
<th data-quarto-table-cell-role="th">Non inscrit</th>
<th data-quarto-table-cell-role="th">Rassemblement National</th>
<th data-quarto-table-cell-role="th">Renaissance</th>
<th data-quarto-table-cell-role="th">Socialistes et apparentés (membre de l’intergroupe NUPES)</th>
<th data-quarto-table-cell-role="th">Écologiste - NUPES</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Mar-2010</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Jul-2010</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>2.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Sep-2010</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>2.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oct-2010</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>3.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Nov-2010</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>6.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>9.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Et on représente maintenant le nombre de retweets posté par parti politique au fil du temps</p>
<div id="cell-27" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>retw.plot(kind<span class="op">=</span><span class="st">'bar'</span>, stacked<span class="op">=</span><span class="va">True</span>, figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">10</span>))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>sns.reset_orig()</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>plt.xticks(ticks<span class="op">=</span><span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(retw.index), <span class="dv">5</span>), labels<span class="op">=</span>retw.index[::<span class="dv">5</span>], rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>) <span class="co"># ici on veut afficher les mois selon un intervalle de 5 sur l'axe des x (temps)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Mois'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Nombre de Retweets'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Nombre de Retweets par Parti par mois'</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Parti Politique'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.2</span>), loc<span class="op">=</span><span class="st">'upper center'</span>, ncol<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="les-tweets" class="level4">
<h4 class="anchored" data-anchor-id="les-tweets"><strong>Les tweets</strong></h4>
<p>De même que pour les retweets on représente les tweets</p>
<div id="cell-30" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>tw <span class="op">=</span> tw.pivot(index<span class="op">=</span><span class="st">'month'</span>, columns<span class="op">=</span><span class="st">'Parti'</span>, values<span class="op">=</span><span class="st">'tweets'</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>tw.index <span class="op">=</span> pd.to_datetime(tw.index, <span class="bu">format</span><span class="op">=</span><span class="st">'%b-%Y'</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>tw <span class="op">=</span> tw.sort_index()</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>tw.index <span class="op">=</span> tw.index.strftime(<span class="st">'%b-%Y'</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>h(tw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Parti</th>
<th data-quarto-table-cell-role="th">Démocrate (MoDem et Indépendants)</th>
<th data-quarto-table-cell-role="th">Gauche démocrate et républicaine - NUPES</th>
<th data-quarto-table-cell-role="th">Horizons et apparentés</th>
<th data-quarto-table-cell-role="th">La France insoumise - Nouvelle Union Populaire écologique et sociale</th>
<th data-quarto-table-cell-role="th">Les Républicains</th>
<th data-quarto-table-cell-role="th">Libertés, Indépendants, Outre-mer et Territoires</th>
<th data-quarto-table-cell-role="th">Non inscrit</th>
<th data-quarto-table-cell-role="th">Rassemblement National</th>
<th data-quarto-table-cell-role="th">Renaissance</th>
<th data-quarto-table-cell-role="th">Socialistes et apparentés (membre de l’intergroupe NUPES)</th>
<th data-quarto-table-cell-role="th">Écologiste - NUPES</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Dec-2009</td>
<td>1.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>3.0</td>
<td>1.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Jan-2010</td>
<td>22.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>5.0</td>
<td>1.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Feb-2010</td>
<td>37.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>5.0</td>
<td>7.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Mar-2010</td>
<td>13.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1.0</td>
<td>1.0</td>
<td>NaN</td>
<td>NaN</td>
<td>4.0</td>
<td>9.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Apr-2010</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>1.0</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>6.0</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-31" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>tw.plot(kind<span class="op">=</span><span class="st">'bar'</span>, stacked<span class="op">=</span><span class="va">True</span>, figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">10</span>))</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>sns.reset_orig()</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>plt.xticks(ticks<span class="op">=</span><span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(tw.index), <span class="dv">5</span>), labels<span class="op">=</span>tw.index[::<span class="dv">5</span>], rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Mois'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Nombre de Tweets'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Nombre de Tweets par Parti par mois'</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Parti Politique'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.2</span>), loc<span class="op">=</span><span class="st">'upper center'</span>, ncol<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="evolution-du-nombre-de-tweets-et-retweets-additionnel" class="level2">
<h2 class="anchored" data-anchor-id="evolution-du-nombre-de-tweets-et-retweets-additionnel"><strong>Evolution du nombre de tweets et retweets</strong> (additionnel)</h2>
<p>Ici nous présentons une bref analyse de l’impact du temps sur le nombre de tweets et de retweets par mois</p>
<p>D’emblée, on recupère le nombre de tweet-retweets posté par chaque parti durant chaque mois, qu’on représente ensuite à l’aide d’une courbe d’évolution</p>
<div id="cell-34" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> df.groupby(<span class="st">'month'</span>)[<span class="st">'Parti'</span>].size()</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> b.reset_index()</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>b.columns <span class="op">=</span> [<span class="st">'month'</span>, <span class="st">'n'</span>]</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>b[<span class="st">'month'</span>] <span class="op">=</span> pd.to_datetime(b[<span class="st">'month'</span>])</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> b.sort_values(by<span class="op">=</span><span class="st">'month'</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>b[<span class="st">'month'</span>] <span class="op">=</span> b[<span class="st">'month'</span>].dt.strftime(<span class="st">'%b-%Y'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\aurel\AppData\Local\Temp\ipykernel_33356\2190219378.py:4: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  b['month'] = pd.to_datetime(b['month'])</code></pre>
</div>
</div>
<div id="cell-35" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>sns.set_theme(style<span class="op">=</span><span class="st">"darkgrid"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>plt.plot(b[<span class="st">'month'</span>], b[<span class="st">'n'</span>], linestyle<span class="op">=</span><span class="st">'-'</span>, color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Évolution du Nombre de Tweets au fil du temps"</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>plt.xticks(ticks<span class="op">=</span><span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(b.index), <span class="dv">5</span>), labels<span class="op">=</span>b[<span class="st">'month'</span>][::<span class="dv">5</span>], rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Temps"</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Nombre de tweets + retweets"</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-18-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>La courbe montre une nette augmentation du nombre de tweets et retweets au fil du temps, avec un fort pic après 2020.</p>
<p>Jusqu’en nov 2015, l’activité sur Twitter reste faible, avec des variations mineures. À partir de 2018, on observe une tendance à la hausse plus marquée. Cela montre un intérêt croissant pour le réseau social. La montée rapide après 2020 pourrait être liée à un événement majeur (élection, débats parlementaires…) ou à une tendance sociale accrue vers l’utilisation de Twitter (crises sociales, rentrées parlementaires…).</p>
<p>Enfin, à partir de 2018, on observe un certain rythme cyclique dans l’évolution de cette courbe.</p>
<p>Pour modéliser la relation entre le temps et le nombre de tweets des partis politiques on utilise une simple linear reg:</p>
<div id="cell-38" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>b[<span class="st">'t'</span>] <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="bu">len</span>(b) <span class="op">+</span> <span class="dv">1</span>) <span class="co"># On crée une variable qui va representer le temps</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>h(b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">n</th>
<th data-quarto-table-cell-role="th">t</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">27</td>
<td>Dec-2009</td>
<td>5</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">55</td>
<td>Jan-2010</td>
<td>28</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">41</td>
<td>Feb-2010</td>
<td>49</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">95</td>
<td>Mar-2010</td>
<td>29</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Apr-2010</td>
<td>7</td>
<td>5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>La forme de cette courbe suggère une <strong>loi de puissance</strong> du type <code>n = t^a</code>, où le nombre de tweets <code>n</code> pourrait être proportionnel à une puissance du temps <code>t</code>. En observant la croissance des tweets des députés français, une loi de puissance permettrait de capturer la dynamique sous-jacente de leur activité en ligne au fil du temps.</p>
<p>Pour modéliser cette relation, nous ferons une régression sur les données transformées en logarithme, ce qui simplifie l’ajustement et facilite l’estimation de l’exposant <code>a</code>.</p>
<p>En prenant le logarithme des deux côtés de l’équation <code>n = t^a</code>, nous obtenons une forme linéaire&nbsp;:</p>
<blockquote class="blockquote">
<p>log(n) = constante + a * log(t)</p>
</blockquote>
<p>Le paramètre <code>a</code> représente le rythme de croissance et, en interprétant sa valeur, nous pourrons mieux comprendre l’évolution de l’activité des députés sur Twitter.</p>
<div id="cell-40" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>b[<span class="st">'log_n'</span>] <span class="op">=</span> np.log(b[<span class="st">'n'</span>]) <span class="co"># On convertis le nombre de tweets en log pour réduire l'amplitude des variations</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>b[<span class="st">'log_t'</span>] <span class="op">=</span> np.log(b[<span class="st">'t'</span>])</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Et on effectue notre régression :</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LinearRegression()</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>model.fit(b[[<span class="st">'log_t'</span>]], b[<span class="st">'log_n'</span>])</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> model.coef_[<span class="dv">0</span>]</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>constante <span class="op">=</span> model.intercept_</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co"># On peut plot notre régression</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>b[<span class="st">'log_n_pred'</span>] <span class="op">=</span> model.predict(b[[<span class="st">'log_t'</span>]])</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>plt.scatter(b[<span class="st">'log_t'</span>], b[<span class="st">'log_n'</span>], label<span class="op">=</span><span class="st">'vraies val'</span>)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>plt.plot(b[<span class="st">'log_t'</span>], b[<span class="st">'log_n_pred'</span>], color<span class="op">=</span><span class="st">'red'</span>, label<span class="op">=</span><span class="ss">f'Model: ln(n) = </span><span class="sc">{</span>constante<span class="sc">:.2f}</span><span class="ss"> + </span><span class="sc">{</span>alpha<span class="sc">:.2f}</span><span class="ss">.ln(t)'</span>)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'ln(t)'</span>)</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'ln(n)'</span>)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Linear reg'</span>)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>plt.grid(color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"""</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="ss">==========================================     </span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a><span class="ss">Linear Reg ln(n) = constante + alpha.ln(t)</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a><span class="ss">==========================================</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a><span class="ss">    constante = </span><span class="sc">{</span>constante<span class="sc">:.2f}</span><span class="ss"> </span><span class="ch">\n</span><span class="ss">    alpha = </span><span class="sc">{</span>alpha<span class="sc">:.2f}</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a><span class="ss">"""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-20-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
==========================================     
Linear Reg ln(n) = constante + alpha.ln(t)
==========================================
    constante = -1.36 
    alpha = 2.19
</code></pre>
</div>
</div>
<p><strong>Interpretation</strong> : Chaque augmentation de 1 % du temps (en log) entraîne une augmentation de 2.19 % du nombre de tweets.</p>
<p>Cette relation suggère une croissance rapide, presque exponentielle, du nombre de tweets des députés au fil du temps</p>
</section>
<section id="les-disparités-dans-les-tweets-au-sein-des-partis-politiques" class="level2">
<h2 class="anchored" data-anchor-id="les-disparités-dans-les-tweets-au-sein-des-partis-politiques"><strong>Les disparités dans les tweets au sein des partis politiques</strong></h2>
<p>Dans cette partie nous allons analyser les diparités qu’on peut trouver au sein des tweets des différents parties politiques. Pour cela nous présenterons 4 graphiques clés :</p>
<ul>
<li><p>La moyenne de tweet pour un députés au sein d’un parti</p></li>
<li><p>La dispersion des tweets par partis politiques</p></li>
<li><p>L’intervalle de temps moyen entre chaque tweet au sein d’un parti</p></li>
<li><p>La distribution de la part des retweets dans les posts (tweets + retweets) par partis politiques</p></li>
</ul>
<p>Dans un premier temps on calcule les éléments qui vont nous permettre de réaliser cett tâche : la moyenne des tweets par député, la dispersion des tweets par parti, l’intervalle de temps moyen entre chaque tweet et le nombre de tweet/retweet par parti</p>
<div id="cell-45" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Moyenne de tweets par député</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>tweets_per_depute <span class="op">=</span> df.groupby(<span class="st">'Parti'</span>).size() <span class="op">/</span> df.groupby(<span class="st">'Parti'</span>)[<span class="st">'Nom'</span>].nunique()</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Dispersion des tweets (nombre de tweets par partis)</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>tweets_dispersion <span class="op">=</span> df.groupby(<span class="st">'Parti'</span>).size().std()</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Intervalle de temps entre les tweets</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'date_tweet'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'date_tweet'</span>]) <span class="co"># On convertis la colonne des date au format datetime</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.sort_values(by<span class="op">=</span><span class="st">'date_tweet'</span>) <span class="co"># On trie par ordre chronologique</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'time_diff'</span>] <span class="op">=</span> df.groupby(<span class="st">'Parti'</span>)[<span class="st">'date_tweet'</span>].diff().dt.seconds <span class="co"># On calcule la différence en secondes entre chaque tweet et le tweet précédent</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>time_interval <span class="op">=</span> df.groupby(<span class="st">'Parti'</span>)[<span class="st">'time_diff'</span>].mean() <span class="co"># Et enfin on fais la moyenne de ces differences</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de tweets et retweets</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>tweets_count <span class="op">=</span> df[df[<span class="st">'retweet'</span>] <span class="op">==</span> <span class="st">'yes'</span>].groupby(<span class="st">'Parti'</span>).size()</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>retweets_count <span class="op">=</span> df[df[<span class="st">'retweet'</span>] <span class="op">==</span> <span class="st">'no'</span>].groupby(<span class="st">'Parti'</span>).size()</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>rapport <span class="op">=</span> retweets_count<span class="op">/</span>(tweets_count <span class="op">+</span> retweets_count) <span class="co"># on calcul ensuite la part des retweets dans le global (tweets + retweets)</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>rapport <span class="op">=</span> rapport.sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>h(rapport) <span class="co"># 5 plus grandes de reweets dans les posts</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\aurel\AppData\Local\Temp\ipykernel_33356\3906370631.py:8: UserWarning: Could not infer format, so each element will be parsed individually, falling back to `dateutil`. To ensure parsing is consistent and as-expected, please specify a format.
  df['date_tweet'] = pd.to_datetime(df['date_tweet']) # On convertis la colonne des date au format datetime</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>Parti
Gauche démocrate et républicaine - NUPES                                0.654285
Non inscrit                                                             0.615071
Libertés, Indépendants, Outre-mer et Territoires                        0.610099
Les Républicains                                                        0.591730
La France insoumise - Nouvelle Union Populaire écologique et sociale    0.569040
dtype: float64</code></pre>
</div>
</div>
<p>Passons maintenant à la représentation graphique des éléments calculés.</p>
<p>D’abord pour légender notre graphique nous aurons besoin des noms des differents partis politiques :</p>
<div id="cell-47" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>partis <span class="op">=</span> <span class="bu">sorted</span>(df[<span class="st">'Parti'</span>].unique())</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> partis:</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Démocrate (MoDem et Indépendants)
Gauche démocrate et républicaine - NUPES
Horizons et apparentés
La France insoumise - Nouvelle Union Populaire écologique et sociale
Les Républicains
Libertés, Indépendants, Outre-mer et Territoires
Non inscrit
Rassemblement National
Renaissance
Socialistes et apparentés (membre de l’intergroupe NUPES)
Écologiste - NUPES</code></pre>
</div>
</div>
<div id="cell-48" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>parti_colors <span class="op">=</span> {</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Démocrate (MoDem et Indépendants)'</span>: <span class="st">'#1f77b4'</span>,</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Gauche démocrate et républicaine - NUPES'</span>: <span class="st">'#ff7f0e'</span>,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Horizons et apparentés'</span>: <span class="st">'#2ca02c'</span>,</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'La France insoumise - Nouvelle Union Populaire écologique et sociale'</span>: <span class="st">'#d62728'</span>,</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Libertés, Indépendants, Outre-mer et Territoires'</span>: <span class="st">'#9467bd'</span>,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Les Républicains'</span>: <span class="st">'#8c564b'</span>,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Non inscrit'</span>: <span class="st">'#e377c2'</span>,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Rassemblement National'</span>: <span class="st">'#7f7f7f'</span>,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Renaissance'</span>: <span class="st">'#bcbd22'</span>,</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Socialistes et apparentés (membre de l’intergroupe NUPES)'</span>: <span class="st">'#17becf'</span>,</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Écologiste - NUPES'</span>: <span class="st">'#e41a1c'</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Création des sous-graphiques</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>sns.set_theme(style<span class="op">=</span><span class="st">"darkgrid"</span>)</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">18</span>, <span class="dv">12</span>))</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Moyenne de tweets par député</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span>tweets_per_depute.index, y<span class="op">=</span>tweets_per_depute.values, ax<span class="op">=</span>axs[<span class="dv">0</span>, <span class="dv">0</span>], palette<span class="op">=</span>parti_colors)</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">0</span>].set_title(<span class="st">'Moyenne de Tweets par Député'</span>)</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">0</span>].set_xticklabels([])</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">0</span>].set_xlabel(<span class="st">'Parti'</span>)</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">0</span>].set_ylabel(<span class="st">'Moyenne de Tweets'</span>)</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Courbe de densité des tweets</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> parti <span class="kw">in</span> df[<span class="st">'Parti'</span>].unique():</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>    sns.kdeplot(df[df[<span class="st">'Parti'</span>] <span class="op">==</span> parti][<span class="st">'date_tweet'</span>].dt.dayofyear, ax<span class="op">=</span>axs[<span class="dv">0</span>, <span class="dv">1</span>], label<span class="op">=</span>parti, color<span class="op">=</span>parti_colors.get(parti))</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">1</span>].set_title(<span class="st">'Courbe de Densité des Tweets'</span>)</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">1</span>].set_xlabel(<span class="st">'Jour de l</span><span class="ch">\'</span><span class="st">année'</span>)</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">1</span>].set_ylabel(<span class="st">'Densité'</span>)</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">1</span>].grid(<span class="va">True</span>)</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Intervalle de temps entre les tweets</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span>time_interval.index, y<span class="op">=</span>time_interval.values, ax<span class="op">=</span>axs[<span class="dv">1</span>, <span class="dv">0</span>], palette<span class="op">=</span>parti_colors)</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">0</span>].set_title(<span class="st">'Intervalle de Temps (en secondes) entre les Tweets'</span>)</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">0</span>].set_xlabel(<span class="st">'Parti'</span>)</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">0</span>].set_xticks([])</span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">0</span>].set_ylabel(<span class="st">'Intervalle de Temps (jours)'</span>)</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Rapport entre le nombre de tweets et retweets</span></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span>rapport.index, y<span class="op">=</span>rapport.values, ax<span class="op">=</span>axs[<span class="dv">1</span>, <span class="dv">1</span>], palette<span class="op">=</span>parti_colors, width<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">1</span>].set_title(<span class="st">'Part des retweets dans les Tweets par parti politique'</span>)</span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">1</span>].set_xlabel(<span class="st">'Parti'</span>)</span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">1</span>].set_ylabel(<span class="st">'Nombre'</span>)</span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">1</span>].set_xticklabels([])</span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">1</span>].grid(<span class="va">True</span>)</span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier les handles et labels dans l'ordre alphabétique</span></span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a>handles, labels <span class="op">=</span> axs[<span class="dv">0</span>, <span class="dv">1</span>].get_legend_handles_labels()</span>
<span id="cb29-51"><a href="#cb29-51" aria-hidden="true" tabindex="-1"></a>sorted_handles_labels <span class="op">=</span> <span class="bu">sorted</span>(<span class="bu">zip</span>(labels, handles), key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">0</span>])</span>
<span id="cb29-52"><a href="#cb29-52" aria-hidden="true" tabindex="-1"></a>sorted_labels, sorted_handles <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span>sorted_handles_labels)</span>
<span id="cb29-53"><a href="#cb29-53" aria-hidden="true" tabindex="-1"></a>fig.legend(sorted_handles, sorted_labels, loc<span class="op">=</span><span class="st">'upper center'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">0.5</span>, <span class="op">-</span><span class="fl">0.05</span>), ncol<span class="op">=</span><span class="dv">4</span>, markerscale<span class="op">=</span><span class="dv">2</span>, fontsize<span class="op">=</span><span class="st">'medium'</span>)</span>
<span id="cb29-54"><a href="#cb29-54" aria-hidden="true" tabindex="-1"></a>plt.tight_layout(rect<span class="op">=</span>[<span class="dv">0</span>, <span class="fl">0.03</span>, <span class="dv">1</span>, <span class="fl">0.95</span>])</span>
<span id="cb29-55"><a href="#cb29-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-56"><a href="#cb29-56" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-57"><a href="#cb29-57" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\aurel\AppData\Local\Temp\ipykernel_33356\2339141941.py:20: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(x=tweets_per_depute.index, y=tweets_per_depute.values, ax=axs[0, 0], palette=parti_colors)
C:\Users\aurel\AppData\Local\Temp\ipykernel_33356\2339141941.py:35: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(x=time_interval.index, y=time_interval.values, ax=axs[1, 0], palette=parti_colors)
C:\Users\aurel\AppData\Local\Temp\ipykernel_33356\2339141941.py:42: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.barplot(x=rapport.index, y=rapport.values, ax=axs[1, 1], palette=parti_colors, width=0.5)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-23-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="analyse-du-champ-lexical-des-partis-politiques" class="level2">
<h2 class="anchored" data-anchor-id="analyse-du-champ-lexical-des-partis-politiques"><strong>Analyse du champ lexical des partis politiques</strong></h2>
<p>Ici, nous allons d’abord importer les données fusionnées (tweets et retweets)</p>
<div id="cell-51" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"df.csv"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>h(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\aurel\AppData\Local\Temp\ipykernel_26676\3174425095.py:1: DtypeWarning: Columns (4) have mixed types. Specify dtype option on import or set low_memory=False.
  df = pd.read_csv("df.csv")</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">id</th>
<th data-quarto-table-cell-role="th">retweet</th>
<th data-quarto-table-cell-role="th">date_tweet</th>
<th data-quarto-table-cell-role="th">date_tweet_original</th>
<th data-quarto-table-cell-role="th">text</th>
<th data-quarto-table-cell-role="th">Twitter</th>
<th data-quarto-table-cell-role="th">Nom</th>
<th data-quarto-table-cell-role="th">Parti</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>@_didierparis</td>
<td>1573960903082577920</td>
<td>no</td>
<td>Sun Sep 25 09:01:36 +0000 2022</td>
<td>NaN</td>
<td>Marie-Louise Fort a porté un engagement politi...</td>
<td>@_didierparis</td>
<td>m. didier paris</td>
<td>Renaissance</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>@_didierparis</td>
<td>1248014208781790976</td>
<td>no</td>
<td>Wed Apr 08 22:25:49 +0000 2020</td>
<td>NaN</td>
<td>Face au #Covid19\nLe @gouvernementFR facilite ...</td>
<td>@_didierparis</td>
<td>m. didier paris</td>
<td>Renaissance</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>@_didierparis</td>
<td>1248991409954225920</td>
<td>no</td>
<td>Sat Apr 11 15:08:51 +0000 2020</td>
<td>NaN</td>
<td>Ensemble, nous formons la #FranceUnie contre l...</td>
<td>@_didierparis</td>
<td>m. didier paris</td>
<td>Renaissance</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>@_didierparis</td>
<td>1248010336503868928</td>
<td>no</td>
<td>Wed Apr 08 22:10:25 +0000 2020</td>
<td>NaN</td>
<td>Face au #Covid19\nAfin de faciliter le verseme...</td>
<td>@_didierparis</td>
<td>m. didier paris</td>
<td>Renaissance</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>@_didierparis</td>
<td>1250310724410150912</td>
<td>no</td>
<td>Wed Apr 15 06:31:21 +0000 2020</td>
<td>NaN</td>
<td>🇫🇷 🏛 #DirectAN #QAG 🏛🇫🇷\n«&nbsp;Il appartient au @g...</td>
<td>@_didierparis</td>
<td>m. didier paris</td>
<td>Renaissance</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>On commence d’abord par définir une liste de mots vides en français pour les filtrer. Ensuite, nous allons créer une fonction de prétraitement preprocess_text qui nettoiera le texte en supprimant les URLs, mentions, caractères spéciaux, mots vides et mots trop courts. Nous appliquerons cette fonction à chaque tweet. Par la suite, nous regrouperons les tweets par parti politique pour compter les mots les plus fréquents dans chaque groupe à l’aide de Counter.</p>
<div id="cell-53" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>alternative_stop_words <span class="op">=</span> {</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"l'"</span>, <span class="st">"le"</span>, <span class="st">"la"</span>, <span class="st">"les"</span>, <span class="st">"un"</span>, <span class="st">"une"</span>, <span class="st">"des"</span>, <span class="st">"et"</span>, <span class="st">"ou"</span>, <span class="st">"de"</span>, <span class="st">"du"</span>, <span class="st">"d'"</span>, <span class="st">"dans"</span>, <span class="st">"en"</span>, <span class="st">"par"</span>, </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"pour"</span>, <span class="st">"sur"</span>, <span class="st">"avec"</span>, <span class="st">"sans"</span>, <span class="st">"ce"</span>, <span class="st">"cette"</span>, <span class="st">"ces"</span>, <span class="st">"je"</span>, <span class="st">"tu"</span>, <span class="st">"il"</span>, <span class="st">"elle"</span>, <span class="st">"nous"</span>, </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"vous"</span>, <span class="st">"ils"</span>, <span class="st">"elles"</span>, <span class="st">"se"</span>, <span class="st">"s'"</span>, <span class="st">"mon"</span>, <span class="st">"ton"</span>, <span class="st">"son"</span>, <span class="st">"ma"</span>, <span class="st">"ta"</span>, <span class="st">"sa"</span>, <span class="st">"mes"</span>, <span class="st">"tes"</span>, </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ses"</span>, <span class="st">"notre"</span>, <span class="st">"votre"</span>, <span class="st">"leur"</span>, <span class="st">"leurs"</span>, <span class="st">"y"</span>, <span class="st">"a"</span>, <span class="st">"être"</span>, <span class="st">"avoir"</span>, <span class="st">"faire"</span>, <span class="st">"plus"</span>, </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"moins"</span>, <span class="st">"tous"</span>, <span class="st">"tout"</span>, <span class="st">"toute"</span>, <span class="st">"toutes"</span>, <span class="st">"comme"</span>, <span class="st">"mais"</span>, <span class="st">"ou"</span>, <span class="st">"donc"</span>, <span class="st">"or"</span>, <span class="st">"ni"</span>, </span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"car"</span>, <span class="st">"bien"</span>, <span class="st">"aussi"</span>, <span class="st">"là"</span>, <span class="st">"autre"</span>, <span class="st">"autres"</span>, <span class="st">"avant"</span>, <span class="st">"après"</span>, <span class="st">"aujourd'hui"</span>, </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"hier"</span>, <span class="st">"demain"</span>, <span class="st">"très"</span>, <span class="st">"peu"</span>, <span class="st">"encore"</span>, <span class="st">"déjà"</span>, <span class="st">"seulement"</span>, </span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"non"</span>, <span class="st">"oui"</span>, <span class="st">"on"</span>, <span class="st">"ça"</span>, <span class="st">"c'"</span>, <span class="st">"qui"</span>, <span class="st">"que"</span>, <span class="st">"quoi"</span>, <span class="st">"quand"</span>, <span class="st">"où"</span>, <span class="st">"comment"</span>, <span class="st">"pourquoi"</span>,<span class="st">"au"</span>,<span class="st">"est"</span>,<span class="st">"pas"</span>,<span class="st">"aux"</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"ne"</span>,<span class="st">"cest"</span>,<span class="st">"nos"</span>,<span class="st">"sont"</span>,<span class="st">"ont"</span>,<span class="st">"jai"</span>,<span class="st">"si"</span>,<span class="st">"nest"</span>,<span class="st">"fait"</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-54" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> preprocess_text(text):</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> <span class="bu">isinstance</span>(text, <span class="bu">str</span>):  <span class="co"># Vérifie que le texte est une chaîne</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>        text <span class="op">=</span> <span class="st">""</span>  <span class="co"># Remplace les valeurs non-textuelles ou NaN par une chaîne vide</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> text.lower()  <span class="co"># Conversion en minuscules</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> re.sub(<span class="vs">r'http\S+|@\S+|[^a-z\s]'</span>, <span class="st">''</span>, text)  <span class="co"># Suppression des URL, mentions, caractères spéciaux</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    words <span class="op">=</span> [word <span class="cf">for</span> word <span class="kw">in</span> text.split() <span class="cf">if</span> word <span class="kw">not</span> <span class="kw">in</span> alternative_stop_words <span class="kw">and</span> <span class="bu">len</span>(word) <span class="op">&gt;</span> <span class="dv">1</span>]</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> words</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Applique la fonction de prétraitement sur chaque tweet de manière sécurisée</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'processed_text'</span>] <span class="op">=</span> df[<span class="st">'text'</span>].<span class="bu">apply</span>(preprocess_text)</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Regroupement par parti et comptage des mots</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>party_lexical_counts <span class="op">=</span> {</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    party: Counter([word <span class="cf">for</span> tweet_words <span class="kw">in</span> group[<span class="st">'processed_text'</span>] <span class="cf">for</span> word <span class="kw">in</span> tweet_words]).most_common(<span class="dv">15</span>)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> party, group <span class="kw">in</span> df.groupby(<span class="st">'Parti'</span>)</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Enfin, nous générerons un nuage de mots (WordCloud) pour chaque parti, visualisant ainsi les mots les plus représentatifs de chaque parti politique et voila les résultats qu’on obtient :</p>
<div id="cell-56" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> party, words <span class="kw">in</span> party_lexical_counts.items():</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Top mots pour le parti </span><span class="sc">{</span>party<span class="sc">}</span><span class="ss">:"</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    column_width <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> word, count <span class="kw">in</span> words:</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>word<span class="sc">:</span><span class="op">&lt;</span>{column_width}<span class="sc">}</span><span class="ss"> </span><span class="sc">{</span>count<span class="sc">:</span><span class="op">&lt;</span>{column_width}<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> party, words <span class="kw">in</span> party_lexical_counts.items():</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    wordcloud <span class="op">=</span> WordCloud(width<span class="op">=</span><span class="dv">800</span>, height<span class="op">=</span><span class="dv">400</span>, background_color<span class="op">=</span><span class="st">'white'</span>).generate_from_frequencies(<span class="bu">dict</span>(words))</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    plt.imshow(wordcloud, interpolation<span class="op">=</span><span class="st">'bilinear'</span>)</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    plt.axis(<span class="st">'off'</span>)</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'Nuage de mots pour le parti </span><span class="sc">{</span>party<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Top mots pour le parti Démocrate (MoDem et Indépendants):
france          7540           
merci           7187           
contre          5376           
ans             5362           
directan        5036           
loi             4892           
aujourdhui      4882           
franais         4189           
matin           4073           
trs             4014           
ministre        3981           
projet          3960           
travail         3958           
prsident        3920           
depuis          3830           

Top mots pour le parti Gauche démocrate et républicaine - NUPES:
directan        2738           
contre          1694           
france          1682           
macron          1440           
gouvernement    1382           
retraites       1280           
loi             1278           
pcf             1159           
ans             1065           
rforme          1026           
franais         1003           
travail         1001           
ministre        918            
gauche          908            
tre             897            

Top mots pour le parti Horizons et apparentés:
merci           4786           
france          4289           
directan        2851           
ans             2614           
matin           2593           
contre          2531           
aujourdhui      2448           
trs             2427           
franais         2320           
loi             2281           
dun             2254           
prsident        2156           
soutien         2097           
soir            2081           
ministre        2025           

Top mots pour le parti La France insoumise - Nouvelle Union Populaire écologique et sociale:
contre          21611          
macron          17902          
nupes           15854          
ans             14695          
france          14004          
gouvernement    13810          
directan        10211          
lassemble       9665           
merci           8800           
retraites       8679           
faut            8678           
mme             8605           
loi             8535           
soutien         8422           
aujourdhui      8349           

Top mots pour le parti Les Républicains:
france          10685          
merci           6870           
directan        6773           
franais         5908           
politique       5216           
prsident        4971           
contre          4804           
gouvernement    4671           
trs             4669           
ans             4387           
soir            4240           
tre             4191           
soutien         4142           
droite          3923           
pays            3642           

Top mots pour le parti Libertés, Indépendants, Outre-mer et Territoires:
directan        2353           
di              2246           
corse           1549           
loi             1402           
groupe          1248           
contre          1242           
france          1185           
gouvernement    1145           
territoires     968            
ministre        962            
qag             959            
merci           906            
in              893            
trs             877            
politique       868            

Top mots pour le parti Non inscrit:
france          1561           
franais         1305           
gouvernement    1022           
macron          925            
contre          807            
loi             676            
directan        663            
merci           580            
ans             579            
politique       543            
tre             541            
dun             525            
pays            512            
doit            485            
toulouse        476            

Top mots pour le parti Rassemblement National:
franais         30291          
france          23857          
macron          20282          
marine          14931          
contre          12394          
gouvernement    11918          
rn              11350          
ans             9476           
pen             9261           
pays            9030           
merci           8777           
dputs           8703           
politique       8577           
nationale       8020           
tre             7979           

Top mots pour le parti Renaissance:
france          35264          
merci           28512          
franais         26221          
contre          23346          
directan        23152          
loi             21407          
ans             20004          
travail         17958          
aujourdhui      17119          
projet          17089          
matin           16812          
prsident        16806          
soutien         16709          
ministre        16037          
depuis          15546          

Top mots pour le parti Socialistes et apparentés (membre de l’intergroupe NUPES):
merci           4543           
contre          4455           
loi             3995           
gouvernement    3767           
directan        3635           
ans             3549           
france          3394           
gauche          3135           
trs             2453           
aujourdhui      2400           
franais         2387           
tre             2380           
matin           2354           
dune            2345           
rforme          2344           

Top mots pour le parti Écologiste - NUPES:
contre          5498           
jadot           4901           
france          4793           
nupes           4520           
merci           3875           
gouvernement    3769           
climat          3415           
politique       3285           
ans             3241           
tre             3084           
aujourdhui      2988           
soutien         2965           
faut            2855           
climatique      2814           
cologistes      2791           </code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-27-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-27-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-27-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-27-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-27-output-6.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-27-output-7.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-27-output-8.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-27-output-9.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-27-output-10.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-27-output-11.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="exercice_twitter_files/figure-html/cell-27-output-12.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>